{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/murmurhash-js/index.js","node_modules/murmurhash-js/murmurhash2_gc.js","node_modules/murmurhash-js/murmurhash3_gc.js","node_modules/random-material-color/dist/randomColor.js","src/js/config.js","src/js/lib/keyHandler.js","src/js/lib/pubsub.js","src/js/main.js","src/js/models/Card.js","src/js/models/CardManager.js","src/js/prototypes.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var murmur3 = require(\"./murmurhash3_gc.js\")\nvar murmur2 = require(\"./murmurhash2_gc.js\")\n\nmodule.exports = murmur3\nmodule.exports.murmur3 = murmur3\nmodule.exports.murmur2 = murmur2\n","/**\n * JS Implementation of MurmurHash2\n * \n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/murmurhash-js\n * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n * @see http://sites.google.com/site/murmurhash/\n * \n * @param {string} str ASCII only\n * @param {number} seed Positive integer only\n * @return {number} 32-bit positive integer hash\n */\n\nfunction murmurhash2_32_gc(str, seed) {\n  var\n    l = str.length,\n    h = seed ^ l,\n    i = 0,\n    k;\n  \n  while (l >= 4) {\n  \tk = \n  \t  ((str.charCodeAt(i) & 0xff)) |\n  \t  ((str.charCodeAt(++i) & 0xff) << 8) |\n  \t  ((str.charCodeAt(++i) & 0xff) << 16) |\n  \t  ((str.charCodeAt(++i) & 0xff) << 24);\n    \n    k = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n    k ^= k >>> 24;\n    k = (((k & 0xffff) * 0x5bd1e995) + ((((k >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n\n\th = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16)) ^ k;\n\n    l -= 4;\n    ++i;\n  }\n  \n  switch (l) {\n  case 3: h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n  case 2: h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n  case 1: h ^= (str.charCodeAt(i) & 0xff);\n          h = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n  }\n\n  h ^= h >>> 13;\n  h = (((h & 0xffff) * 0x5bd1e995) + ((((h >>> 16) * 0x5bd1e995) & 0xffff) << 16));\n  h ^= h >>> 15;\n\n  return h >>> 0;\n}\n\nif(typeof module !== undefined) {\n  module.exports = murmurhash2_32_gc\n}\n","/**\n * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\n * \n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/murmurhash-js\n * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n * @see http://sites.google.com/site/murmurhash/\n * \n * @param {string} key ASCII only\n * @param {number} seed Positive integer only\n * @return {number} 32-bit positive integer hash \n */\n\nfunction murmurhash3_32_gc(key, seed) {\n\tvar remainder, bytes, h1, h1b, c1, c1b, c2, c2b, k1, i;\n\t\n\tremainder = key.length & 3; // key.length % 4\n\tbytes = key.length - remainder;\n\th1 = seed;\n\tc1 = 0xcc9e2d51;\n\tc2 = 0x1b873593;\n\ti = 0;\n\t\n\twhile (i < bytes) {\n\t  \tk1 = \n\t  \t  ((key.charCodeAt(i) & 0xff)) |\n\t  \t  ((key.charCodeAt(++i) & 0xff) << 8) |\n\t  \t  ((key.charCodeAt(++i) & 0xff) << 16) |\n\t  \t  ((key.charCodeAt(++i) & 0xff) << 24);\n\t\t++i;\n\t\t\n\t\tk1 = ((((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16))) & 0xffffffff;\n\t\tk1 = (k1 << 15) | (k1 >>> 17);\n\t\tk1 = ((((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16))) & 0xffffffff;\n\n\t\th1 ^= k1;\n        h1 = (h1 << 13) | (h1 >>> 19);\n\t\th1b = ((((h1 & 0xffff) * 5) + ((((h1 >>> 16) * 5) & 0xffff) << 16))) & 0xffffffff;\n\t\th1 = (((h1b & 0xffff) + 0x6b64) + ((((h1b >>> 16) + 0xe654) & 0xffff) << 16));\n\t}\n\t\n\tk1 = 0;\n\t\n\tswitch (remainder) {\n\t\tcase 3: k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\n\t\tcase 2: k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\n\t\tcase 1: k1 ^= (key.charCodeAt(i) & 0xff);\n\t\t\n\t\tk1 = (((k1 & 0xffff) * c1) + ((((k1 >>> 16) * c1) & 0xffff) << 16)) & 0xffffffff;\n\t\tk1 = (k1 << 15) | (k1 >>> 17);\n\t\tk1 = (((k1 & 0xffff) * c2) + ((((k1 >>> 16) * c2) & 0xffff) << 16)) & 0xffffffff;\n\t\th1 ^= k1;\n\t}\n\t\n\th1 ^= key.length;\n\n\th1 ^= h1 >>> 16;\n\th1 = (((h1 & 0xffff) * 0x85ebca6b) + ((((h1 >>> 16) * 0x85ebca6b) & 0xffff) << 16)) & 0xffffffff;\n\th1 ^= h1 >>> 13;\n\th1 = ((((h1 & 0xffff) * 0xc2b2ae35) + ((((h1 >>> 16) * 0xc2b2ae35) & 0xffff) << 16))) & 0xffffffff;\n\th1 ^= h1 >>> 16;\n\n\treturn h1 >>> 0;\n}\n\nif(typeof module !== \"undefined\") {\n  module.exports = murmurhash3_32_gc\n}","var defaultPalette={50:[\"#FFEBEE\",\"#FCE4EC\",\"#F3E5F5\",\"#EDE7F6\",\"#E8EAF6\",\"#E3F2FD\",\"#E1F5FE\",\"#E0F7FA\",\"#E0F2F1\",\"#E8F5E9\",\"#F1F8E9\",\"#F9FBE7\",\"#FFFDE7\",\"#FFF8E1\",\"#FFF3E0\",\"#FBE9E7\",\"#EFEBE9\",\"#FAFAFA\",\"#ECEFF1\"],100:[\"#FFCDD2\",\"#F8BBD0\",\"#E1BEE7\",\"#D1C4E9\",\"#C5CAE9\",\"#BBDEFB\",\"#B3E5FC\",\"#B2EBF2\",\"#B2DFDB\",\"#C8E6C9\",\"#DCEDC8\",\"#F0F4C3\",\"#FFF9C4\",\"#FFECB3\",\"#FFE0B2\",\"#FFCCBC\",\"#D7CCC8\",\"#F5F5F5\",\"#CFD8DC\"],200:[\"#EF9A9A\",\"#F48FB1\",\"#CE93D8\",\"#B39DDB\",\"#9FA8DA\",\"#90CAF9\",\"#81D4FA\",\"#80DEEA\",\"#80CBC4\",\"#A5D6A7\",\"#C5E1A5\",\"#E6EE9C\",\"#FFF59D\",\"#FFE082\",\"#FFCC80\",\"#FFAB91\",\"#BCAAA4\",\"#EEEEEE\",\"#B0BEC5\"],300:[\"#E57373\",\"#F06292\",\"#BA68C8\",\"#9575CD\",\"#7986CB\",\"#64B5F6\",\"#4FC3F7\",\"#4DD0E1\",\"#4DB6AC\",\"#81C784\",\"#AED581\",\"#DCE775\",\"#FFF176\",\"#FFD54F\",\"#FFB74D\",\"#FF8A65\",\"#A1887F\",\"#E0E0E0\",\"#90A4AE\"],400:[\"#EF5350\",\"#EC407A\",\"#AB47BC\",\"#7E57C2\",\"#5C6BC0\",\"#42A5F5\",\"#29B6F6\",\"#26C6DA\",\"#26A69A\",\"#66BB6A\",\"#9CCC65\",\"#D4E157\",\"#FFEE58\",\"#FFCA28\",\"#FFA726\",\"#FF7043\",\"#8D6E63\",\"#BDBDBD\",\"#78909C\"],500:[\"#F44336\",\"#E91E63\",\"#9C27B0\",\"#673AB7\",\"#3F51B5\",\"#2196F3\",\"#03A9F4\",\"#00BCD4\",\"#009688\",\"#4CAF50\",\"#8BC34A\",\"#CDDC39\",\"#FFEB3B\",\"#FFC107\",\"#FF9800\",\"#FF5722\",\"#795548\",\"#9E9E9E\",\"#607D8B\"],600:[\"#E53935\",\"#D81B60\",\"#8E24AA\",\"#5E35B1\",\"#3949AB\",\"#1E88E5\",\"#039BE5\",\"#00ACC1\",\"#00897B\",\"#43A047\",\"#7CB342\",\"#C0CA33\",\"#FDD835\",\"#FFB300\",\"#FB8C00\",\"#F4511E\",\"#6D4C41\",\"#757575\",\"#546E7A\"],700:[\"#D32F2F\",\"#C2185B\",\"#7B1FA2\",\"#512DA8\",\"#303F9F\",\"#1976D2\",\"#0288D1\",\"#0097A7\",\"#00796B\",\"#388E3C\",\"#689F38\",\"#AFB42B\",\"#FBC02D\",\"#FFA000\",\"#F57C00\",\"#E64A19\",\"#5D4037\",\"#616161\",\"#455A64\"],800:[\"#C62828\",\"#AD1457\",\"#6A1B9A\",\"#4527A0\",\"#283593\",\"#1565C0\",\"#0277BD\",\"#00838F\",\"#00695C\",\"#2E7D32\",\"#558B2F\",\"#9E9D24\",\"#F9A825\",\"#FF8F00\",\"#EF6C00\",\"#D84315\",\"#4E342E\",\"#424242\",\"#37474F\"],900:[\"#B71C1C\",\"#880E4F\",\"#4A148C\",\"#311B92\",\"#1A237E\",\"#0D47A1\",\"#01579B\",\"#006064\",\"#004D40\",\"#1B5E20\",\"#33691E\",\"#827717\",\"#F57F17\",\"#FF6F00\",\"#E65100\",\"#BF360C\",\"#3E2723\",\"#212121\",\"#263238\"],A100:[\"#FF8A80\",\"#FF80AB\",\"#EA80FC\",\"#B388FF\",\"#8C9EFF\",\"#82B1FF\",\"#80D8FF\",\"#84FFFF\",\"#A7FFEB\",\"#B9F6CA\",\"#CCFF90\",\"#F4FF81\",\"#FFFF8D\",\"#FFE57F\",\"#FFD180\",\"#FF9E80\"],A200:[\"#FF5252\",\"#FF4081\",\"#E040FB\",\"#7C4DFF\",\"#536DFE\",\"#448AFF\",\"#40C4FF\",\"#18FFFF\",\"#64FFDA\",\"#69F0AE\",\"#B2FF59\",\"#EEFF41\",\"#FFFF00\",\"#FFD740\",\"#FFAB40\",\"#FF6E40\"],A400:[\"#FF1744\",\"#F50057\",\"#D500F9\",\"#651FFF\",\"#3D5AFE\",\"#2979FF\",\"#00B0FF\",\"#00E5FF\",\"#1DE9B6\",\"#00E676\",\"#76FF03\",\"#C6FF00\",\"#FFEA00\",\"#FFC400\",\"#FF9100\",\"#FF3D00\"],A700:[\"#D50000\",\"#C51162\",\"#AA00FF\",\"#6200EA\",\"#304FFE\",\"#2962FF\",\"#0091EA\",\"#00B8D4\",\"#00BFA5\",\"#00C853\",\"#64DD17\",\"#AEEA00\",\"#FFD600\",\"#FFAB00\",\"#FF6D00\",\"#DD2C00\"]},murmur=require(\"murmurhash-js\");module.exports=function(){var F=[],E={shades:[\"500\"],palette:defaultPalette,text:null,ignoreColors:[]},C=function(C){C||(C=E),C.palette||(C.palette=defaultPalette),C.shades||(C.shades=[\"500\"]);for(var B,D=F.length,t=0;D>t;t++)if(C.text&&F[t].text===C.text)return F[t].color;return B=A(C),C.text&&F.push({text:C.text,color:B}),B},A=function(F){var E=F.shades[B(F.shades.length)],C=\"\";for(var A in F.palette)F.palette.hasOwnProperty(A)&&A===E&&(C=F.text?F.palette[A][D(F.text,F.palette[A].length)]:F.palette[A][B(F.palette[A].length)]);return C},B=function(F){return Math.floor(Math.random()*F)},D=function(F,E){var C=murmur.murmur3(F)/1e10;return.1>C&&(C=10*C),Math.floor(C*E)};return{getColor:C}}();","module.exports = {\r\n  SAVE_CARDS: 'SAVE_CARDS',\r\n  SELECT_CARD: 'SELECT_CARD',\r\n  RERENDER: 'RERENDER',\r\n  LESS_PRISTINE: 'LESS_PRISTINE',\r\n  ASCII: {\r\n    ESCAPE_KEY: 27,\r\n    TAB_KEY: 9,\r\n    C_KEY: 67,\r\n    D_KEY: 68,\r\n    E_KEY: 69,\r\n    PLUS_KEY: 187,\r\n    MINUS_KEY: 189,\r\n    DOT_KEY: 190,\r\n    A_KEY: 65,\r\n    I_KEY: 73,\r\n    R_KEY: 82,\r\n    Z_KEY: 90,\r\n    CMD_KEY: 91,\r\n    KEYS_ARRAY: [27, 9, 67, 68, 69, 187, 189, 190, 65, 73, 82, 90, 91]\r\n  },\r\n  DEFAULT_CONTENT: 'W3siaWQiOjAsInRpdGxlIjoiMSIsImRlc2NyaXB0aW9uIjoiVXNlIHRhYiBhbmQgc2hpZnQgdGFiIHRvIGNpcmNsZSBiZXR3ZWVuIGNhcmRzIDpEXG5cbkRyYWdnaW5nIG9yIGNsaWNraW5nIHRoZW0gd2lsbCBhbHNvIG1hcmsgdGhlbSBhcyBzZWxlY3RlZCIsImRlcHRoIjo1LCJ4IjoxNjksInkiOjc5LCJjb2xvciI6IiNBNUQ2QTciLCJzZWxlY3RlZCI6dHJ1ZSwiaXNBcmNoaXZlZCI6ZmFsc2UsImlzRGVsZXRlZCI6ZmFsc2UsImNyZWF0ZWRBdCI6MTUwNzY0Njc1ODE4NiwiYXJjaGl2ZWRBdCI6bnVsbCwibm9kZSI6eyJqUXVlcnkxNzIwNDI0NzE4MTg1NzEyOTY0MDUiOjR9fSx7ImlkIjoxLCJ0aXRsZSI6IjIiLCJkZXNjcmlwdGlvbiI6Ik9uIGEgbWFya2VkIGNhcmQgdXNlIGN0cmwgKzpcbidjJyB0byBjb3B5IHRoZSBjb250ZW50XG4nZCcgdG8gZGVsZXRlIGl0XG4nZScgdG8gZWRpdCBpdFxuJ2EnIHRvIGFyY2hpdmUgb3IgZGVhcmNoaXZlIGRlIGNhcmQiLCJkZXB0aCI6NSwieCI6MzgyLCJ5Ijo3NiwiY29sb3IiOiIjQUVENTgxIiwic2VsZWN0ZWQiOmZhbHNlLCJpc0FyY2hpdmVkIjpmYWxzZSwiaXNEZWxldGVkIjpmYWxzZSwiY3JlYXRlZEF0IjoxNTA3NjQ2NzcxNzQwLCJhcmNoaXZlZEF0IjpudWxsLCJub2RlIjp7ImpRdWVyeTE3MjA0MjQ3MTgxODU3MTI5NjQwNSI6OH19LHsiaWQiOjIsInRpdGxlIjoiZW50ZXJzIiwiZGVzY3JpcHRpb24iOiJXaGlsZSBlZGl0aW5nIHVzZSBzaGlmdCArIGVudGVyIHRvIFxuaW5zZXJ0XG5hXG5saW5lXG5icmVha1xuOkQiLCJkZXB0aCI6NSwieCI6MTU5LCJ5IjozMTIsImNvbG9yIjoiI0ZGQjc0RCIsInNlbGVjdGVkIjpmYWxzZSwiaXNBcmNoaXZlZCI6ZmFsc2UsImlzRGVsZXRlZCI6ZmFsc2UsImNyZWF0ZWRBdCI6MTUwNzY0Njc5MjI5NywiYXJjaGl2ZWRBdCI6bnVsbCwibm9kZSI6eyJqUXVlcnkxNzIwNDI0NzE4MTg1NzEyOTY0MDUiOjZ9fSx7ImlkIjozLCJ0aXRsZSI6IkdlbmVyaWMiLCJkZXNjcmlwdGlvbiI6IllvdSBjYW4gYWxzbyB1c2UgZ2VuZXJpYyBjb21tYW5kcyBzdWNoIGFzIGN0cmwrXG4naScgdG8gY3JlYXRlIGEgY2FyZFxuJ3onIHRvIHJldml2ZSB0aGUgbGFzdCBkZWxldGVkIGNhcmQiLCJkZXB0aCI6NSwieCI6NDQxLCJ5IjoyOTYsImNvbG9yIjoiI0ZGRTA4MiIsInNlbGVjdGVkIjpmYWxzZSwiaXNBcmNoaXZlZCI6ZmFsc2UsImlzRGVsZXRlZCI6ZmFsc2UsImNyZWF0ZWRBdCI6MTUwNzY0ODYzODM4NiwiYXJjaGl2ZWRBdCI6bnVsbCwiaXNQcmlzdGluZSI6ZmFsc2UsIm5vZGUiOnsialF1ZXJ5MTcyMDQyNDcxODE4NTcxMjk2NDA1IjoxMH19XQ',\r\n  VERSION: '0.5.0'\r\n};\r\n","const CONFIG = require('../config');\r\n\r\nlet cardManager;\r\nlet Card = require('../models/Card');\r\n\r\nlet mainContainer,\r\n  editContainer,\r\n  editInput,\r\n  titleInput,\r\n  importContainer,\r\n  importInput,\r\n  exportContainer,\r\n  exportContent,\r\n  importButton;\r\n\r\nfunction init (options) {\r\n  cardManager = options.cardManager;\r\n  bindings();\r\n}\r\n\r\nfunction bindings () {\r\n  mainContainer = $('#mainContainer');\r\n  editContainer = document.getElementById('editContainer');\r\n  editInput = editContainer.getElementsByClassName('textarea')[0];\r\n  titleInput = editContainer.getElementsByClassName('input')[0];\r\n  importContainer = document.getElementById('importContainer');\r\n  importInput = importContainer.getElementsByClassName('input')[0];\r\n  importButton = importContainer.getElementsByClassName('button')[0];\r\n  exportContainer = document.getElementById('exportContainer');\r\n  exportContent = exportContainer.getElementsByTagName('div')[0];\r\n\r\n  window.addEventListener('keyup', keyHandlerUp, false);\r\n  window.addEventListener('keydown', keyHandlerDown, false);\r\n  editInput.addEventListener('keydown', editInputKeyEvent);\r\n  titleInput.addEventListener('keydown', editInputKeyEvent);\r\n  editContainer.addEventListener('click', hideEditContainer);\r\n  editInput.addEventListener('click', stopPropagation);\r\n  titleInput.addEventListener('click', stopPropagation);\r\n  /*\r\n     On double click edit the card\r\n     */\r\n  mainContainer.on('dblclick', 'div', doubleClickHandler);\r\n  /*\r\n     On click perform the card\r\n     */\r\n  mainContainer.on('click', 'div', cardClickEvents);\r\n  mainContainer.on('click', 'div > div', cardMenuEvents);\r\n  document.getElementById('export').addEventListener('click', exportCards);\r\n  document.getElementById('import').addEventListener('click', showImporter);\r\n  importButton.addEventListener('click', loadImportCardsCode);\r\n  importContainer.addEventListener('click', hideImportContainer);\r\n  importInput.addEventListener('keydown', importInputKeyEvent);\r\n  importInput.addEventListener('click', stopPropagation);\r\n  exportContainer.addEventListener('click', hideExportContainer);\r\n  exportContent.addEventListener('click', stopPropagation);\r\n}\r\n\r\nfunction keyHandlerDown (e) {\r\n  if (e.keyCode === CONFIG.ASCII.TAB_KEY) {\r\n    document.activeElement.blur();\r\n    if (e.shiftKey) {\r\n      cardManager.previousCard();\r\n    } else {\r\n      cardManager.nextCard();\r\n    }\r\n    if (e.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n  } else if (e.keyCode === CONFIG.ASCII.CMD_KEY) {\r\n    window.cmdPress = true;\r\n  }\r\n}\r\n\r\nfunction keyHandlerUp (e) {\r\n  console.log(e.keyCode);\r\n  console.log(document.activeElement);\r\n  if (document.activeElement !== document.body || CONFIG.ASCII.KEYS_ARRAY.indexOf(e.keyCode) === -1) {\r\n    return;\r\n  }\r\n  e.stopPropagation();\r\n  e.preventDefault();\r\n\r\n  switch (e.keyCode) {\r\n    case CONFIG.ASCII.C_KEY:\r\n      let elem = cardManager.selectedCard.node;\r\n      let selection;\r\n\r\n      selection = selectText(elem.getElementsByClassName('cardText')[0]);\r\n      copySelectionText();\r\n      selection.empty();\r\n\r\n      break;\r\n    case CONFIG.ASCII.D_KEY:\r\n      let card = cardManager.selectedCard;\r\n      cardManager.nextCard();\r\n      cardManager.deleteCard(card);\r\n      cardManager.saveCards();\r\n      break;\r\n    case CONFIG.ASCII.E_KEY:\r\n      doubleClickHandler.apply(cardManager.selectedCard.node);\r\n\r\n      break;\r\n    case CONFIG.ASCII.A_KEY:\r\n      cardManager.selectedCard.toggleArchived();\r\n      break;\r\n    case CONFIG.ASCII.I_KEY:\r\n      // input.focus();\r\n      createCard();\r\n      break;\r\n    case CONFIG.ASCII.PLUS_KEY:\r\n      changeDepth.apply(cardManager.selectedCard.node, [cardManager.selectedCard.id, 1]);\r\n      break;\r\n    case CONFIG.ASCII.MINUS_KEY:\r\n      changeDepth.apply(cardManager.selectedCard.node, [cardManager.selectedCard.id, -1]);\r\n      break;\r\n    case CONFIG.ASCII.DOT_KEY:\r\n      setDepth.apply(cardManager.selectedCard.node, [cardManager.selectedCard.id, 5]);\r\n      break;\r\n    case CONFIG.ASCII.R_KEY:\r\n      cardManager.selectedCard.color = cardManager.selectedCard.getBackgroundColor();\r\n      cardManager.selectedCard.derender();\r\n      cardManager.selectedCard.render();\r\n\r\n      cardManager.saveCards();\r\n      break;\r\n    case CONFIG.ASCII.Z_KEY:\r\n      cardManager.undeleteLastCard();\r\n      break;\r\n    case CONFIG.ASCII.CMD_KEY:\r\n      window.cmdPress = false;\r\n  }\r\n}\r\n\r\nfunction hideExportContainer () {\r\n  exportContainer.style.display = 'none';\r\n}\r\n\r\nfunction hideEditContainer () {\r\n  editContainer.style.display = 'none';\r\n}\r\n\r\nfunction hideImportContainer () {\r\n  importContainer.style.display = 'none';\r\n}\r\n\r\nfunction stopPropagation (e) {\r\n  e.stopPropagation();\r\n}\r\n\r\nfunction editInputKeyEvent (event) {\r\n  event.stopPropagation();\r\n  let card;\r\n  if (event.keyCode === 13 && event.shiftKey) return;\r\n  if (event.keyCode === 13) {\r\n    card = cardManager.cards[editContainer.cardId];\r\n    card.title = titleInput.value;\r\n    card.description = editInput.value;\r\n    card.derender();\r\n    card.render();\r\n    this.value = '';\r\n    cardManager.saveCards();\r\n    hideEditContainer();\r\n  } else if (event.keyCode === 27) {\r\n    hideEditContainer();\r\n  }\r\n}\r\n\r\nfunction importInputKeyEvent (event) {\r\n  if (event.keyCode === 27) {\r\n    hideImportContainer();\r\n  }\r\n}\r\n\r\nfunction doubleClickHandler () {\r\n  let cardId;\r\n  let card;\r\n\r\n  if (this.id === '') {\r\n    cardId = parseInt(this.parentElement.id.split('_')[1]);\r\n  } else {\r\n    cardId = parseInt(this.id.split('_')[1]);\r\n  }\r\n\r\n  card = cardManager.cards[cardId];\r\n\r\n  titleInput.value = card.title;\r\n  editInput.value = card.description;\r\n  titleInput.style.top = card.y;\r\n  titleInput.style.left = card.x;\r\n  editContainer.cardId = cardId;\r\n  editContainer.style.display = 'block';\r\n  editInput.style.top = card.y + 23;\r\n  editInput.style.left = card.x;\r\n  titleInput.focus();\r\n}\r\n\r\nfunction cardClickEvents (event) {\r\n  let cardId;\r\n  let card;\r\n\r\n  if (this.id === '') {\r\n    cardId = parseInt(this.parentElement.id.split('_')[1]);\r\n  } else {\r\n    cardId = parseInt(this.id.split('_')[1]);\r\n  }\r\n\r\n  card = cardManager.cards[cardId];\r\n\r\n  if (card === undefined) return;\r\n\r\n  cardManager.selectCard(card.id);\r\n\r\n  if (event.ctrlKey) {\r\n  }\r\n  if (event.altKey) {\r\n    this.querySelector('.copy').click();\r\n  }\r\n  if (event.shiftKey) {\r\n\r\n  }\r\n}\r\n\r\nfunction cardMenuEvents () {\r\n  let option = $(this).html();\r\n  let selection;\r\n  let cardId = getParentCardId(this);\r\n\r\n  switch (option) {\r\n    case '+':\r\n      changeDepth.apply(this, [cardId, 1]);\r\n      break;\r\n    case '-':\r\n      changeDepth.apply(this, [cardId, -1]);\r\n      break;\r\n    case 'C':\r\n      selection = selectText(this.parentElement.getElementsByClassName('cardText')[0]);\r\n      copySelectionText();\r\n      selection.empty();\r\n      break;\r\n    case 'x':\r\n      cardManager.deleteCard(cardManager.cards[cardId]);\r\n      break;\r\n    case 'V':\r\n    case 'O':\r\n      cardManager.cards[cardId].toggleArchived();\r\n  }\r\n  cardManager.saveCards();\r\n}\r\n\r\nfunction exportCards () {\r\n  exportContainer.style.display = 'block';\r\n  exportContent.innerHTML = cardManager.exportCards();\r\n  selection = selectText(exportContent);\r\n  copySelectionText();\r\n  selection.empty();\r\n}\r\n\r\nfunction loadImportCardsCode () {\r\n  let data = importInput.value;\r\n  cardManager.importCards(data);\r\n  importContainer.style.display = 'none';\r\n}\r\n\r\nfunction showImporter () {\r\n  importContainer.style.display = 'block';\r\n  importInput.focus();\r\n}\r\n\r\nfunction createCard () {\r\n  const card = cardManager.addCard(Object.create(Card, {}).init(''));\r\n  card.render();\r\n  cardManager.selectCard(card.id);\r\n\r\n  // and now we autoedit :D\r\n  doubleClickHandler.apply(card.node);\r\n}\r\n\r\nmodule.exports = {\r\n  init: init\r\n};\r\n","\r\nvar subs = {};\r\n\r\nfunction pub (name, params) {\r\n  subs[name].forEach(function (elem) {\r\n    elem.callback.apply(elem.context, params);\r\n  });\r\n}\r\n\r\nfunction sub (name, callback, context) {\r\n  if (subs[name] === undefined) {\r\n    subs[name] = [];\r\n  }\r\n\r\n  subs[name].push({\r\n    callback: callback,\r\n    context: context\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  pub: pub,\r\n  sub: sub\r\n};\r\n","window.CONFIG = require('./config.js');\r\n\r\nlet keyHandler = require('./lib/keyHandler');\r\nlet cardManager = require('./models/CardManager').getInstance();\r\nlet pubsub = require('./lib/pubsub');\r\n\r\nwindow.cm = {\r\n  cardManager: cardManager\r\n};\r\n\r\nObject.assign(window, require('./prototypes'));\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n  'strict mode';\r\n\r\n  keyHandler.init({\r\n    cardManager: cardManager\r\n  });\r\n    \r\n  cardManager.loadCards();\r\n  cardManager.renderAllCards();\r\n});\r\n","let pubsub = require('../lib/pubsub');\r\nlet randomMC = require('random-material-color');\r\n\r\nlet Card = {\r\n  init: function (title, description, pristine) {\r\n    this.id = -1;\r\n    this.title = title;\r\n    this.description = description;\r\n    this.depth = 5;\r\n    this.x = 100;\r\n    this.y = 100;\r\n    this.color = this.getBackgroundColor();\r\n    this.selected = false;\r\n    this.isArchived = false;\r\n    this.isDeleted = false;\r\n    this.createdAt = +new Date();\r\n    this.archivedAt = null;\r\n    this.isPristine = true;\r\n\r\n    return this;\r\n  },\r\n  render: function (always = false) {\r\n    if (this.isDeleted === true && always === false) {\r\n      return;\r\n    }\r\n\r\n    let node = document.createElement('div');\r\n    let title = document.createElement('div');\r\n    let text = document.createElement('div');\r\n    let link = this.findLink();\r\n    let that = this;\r\n\r\n    if (this.title) {\r\n      if (link) {\r\n        title.innerHTML = `<a target=\"_blank\" href=\"${link}\">${this.title}</a>`;\r\n      } else {\r\n        title.innerHTML = this.title;\r\n      }\r\n    } else {\r\n      if (link) {\r\n        title.innerHTML = `<a target=\"_blank\" href=\"${link}\">Link!</a>`;\r\n      }\r\n    }\r\n\r\n    if (this.description) {\r\n      text.innerHTML = this.description.replace(/\\r?\\n/g, '<br/>');\r\n    }\r\n\r\n    title.className = 'cardTitle';\r\n    text.className = 'cardText';\r\n\r\n    node.id = 'todo_' + this.id;\r\n    node.className = 'card card-1';\r\n    node.style.position = 'fixed';\r\n    node.style.left = this.x;\r\n    node.style.top = this.y;\r\n    node.style.cursor = '-webkit-grab';\r\n    node.style.zIndex = this.depth;\r\n    node.style.backgroundColor = this.color;\r\n\r\n    document.getElementById('mainContainer').appendChild(node);\r\n\r\n    node.appendChild(createDiv('x', 'control remove'));\r\n    // node.appendChild(createDiv('+', 'control up'));\r\n    // node.appendChild(createDiv('-', 'control down'));\r\n    node.appendChild(createDiv('C', 'control copy'));\r\n    node.appendChild(createDiv('depth: ' + this.depth, 'depth'));\r\n    // node.appendChild(createDiv(this.isArchived ? 'V' : 'O', 'isArchived'));\r\n    node.appendChild(createDiv('id: ' + this.id, 'id'));\r\n\r\n    node.appendChild(title);\r\n    node.appendChild(text);\r\n\r\n    $('#todo_' + this.id).draggable({\r\n      stop: function () {\r\n        let card = $('#todo_' + that.id);\r\n\r\n        if (that.isPristine === true) {\r\n          that.isPristine = false;\r\n\r\n          pubsub.pub(window.CONFIG.LESS_PRISTINE);\r\n        }\r\n\r\n        that.x = +card.css('left').replace('px', '');\r\n        that.y = +card.css('top').replace('px', '');\r\n\r\n        pubsub.pub(window.CONFIG.SELECT_CARD, [that.id]);\r\n        pubsub.pub(window.CONFIG.SAVE_CARDS);\r\n      }\r\n    });\r\n\r\n    this.node = node;\r\n\r\n    if (this.selected === true) {\r\n      node.classList.add('selected');\r\n    }\r\n\r\n    if (this.isArchived) {\r\n      node.classList.add('completed');\r\n    }\r\n\r\n    return this;\r\n  },\r\n  getBackgroundColor: function () {\r\n    return randomMC.getColor({ shades: ['200', '300'] });\r\n  },\r\n  derender: function () {\r\n    let node = document.getElementById('todo_' + this.id);\r\n    document.getElementById('mainContainer').removeChild(node);\r\n\r\n    return this;\r\n  },\r\n  toggleArchived: function () {\r\n    if (this.isArchived === false || this.isArchived === undefined) {\r\n      this.node.classList.remove('notCompleted');\r\n      void this.node.offsetWidth;\r\n      this.node.classList.add('completed');\r\n      this.archivedAt = +new Date();\r\n    } else {\r\n      this.node.classList.remove('completed');\r\n      void this.node.offsetWidth;\r\n      this.node.classList.add('notCompleted');\r\n      this.archivedAt = null;\r\n    }\r\n\r\n    this.isArchived = !this.isArchived;\r\n\r\n    pubsub.pub(window.CONFIG.SAVE_CARDS);\r\n  },\r\n  delete: function () {\r\n    this.isDeleted = true;\r\n\r\n    this.derender();\r\n  },\r\n  undelete: function () {\r\n    this.isDeleted = false;\r\n\r\n    this.render();\r\n\r\n    return this;\r\n  },\r\n  findLink: function () {\r\n    const regex = /(https?:\\/\\/[^\\s]+|www.[^\\s]+)/;\r\n    let link = regex.exec(this.title);\r\n\r\n    if (link == null) {\r\n      link = regex.exec(this.description);\r\n    }\r\n\r\n    if (link) {\r\n      return link[0];\r\n    }\r\n  }\r\n};\r\n\r\nmodule.exports = Card;\r\n","const Card = require('./Card');\r\nconst pubsub = require('../lib/pubsub');\r\nconst CONFIG = require('../config');\r\n\r\nlet CardManager = {\r\n  init: function () {\r\n    this.cards = [];\r\n    this.selectedCard = { id: -1 };\r\n    this.deletedCards = [];\r\n    this.pristine = 0;\r\n\r\n    return this;\r\n  },\r\n  addCard: function (card) {\r\n    this.cards.push(card);\r\n    card.id = this.cards.length - 1;\r\n\r\n    card.x = card.x + this.pristine * 10;\r\n    card.y = card.y + this.pristine * 10;\r\n\r\n    this.pristine++;\r\n\r\n    return card;\r\n  },\r\n  removeCard: function (id) {\r\n    this.cards[id].derender();\r\n    this.cards[id] = undefined;\r\n\r\n    return this;\r\n  },\r\n  redrawCard: function (cardId, x, y) {\r\n    let card = this.cards[cardId];\r\n    card.x = x;\r\n    card.y = y;\r\n\r\n    card.derender();\r\n    card.render();\r\n\r\n    return this;\r\n  },\r\n  saveCards: function () {\r\n    if (typeof (Storage) !== 'undefined') {\r\n      window.localStorage.setItem('cards', JSON.stringify(this.cards));\r\n    } else {\r\n      console.log('you don\\'t have local storage :(');\r\n    }\r\n\r\n    this.persistSelectedCard();\r\n    this.persistDeletedCards();\r\n\r\n    return this;\r\n  },\r\n  loadCards: function () {\r\n    this.cards = JSON.parse(window.localStorage.getItem('cards'));\r\n\r\n    if (this.cards === null) {\r\n      this.cards = JSON.parse(window.atob(CONFIG.DEFAULT_CONTENT));\r\n    }\r\n\r\n    this.clearArray();\r\n\r\n    this.loadSelectedCard();\r\n    this.loadDeletedCards();\r\n\r\n    document.activeElement.blur();\r\n\r\n    return this;\r\n  },\r\n  clearArray: function () {\r\n    let i;\r\n\r\n    this.cards = this.cards.filter(function (elem) {\r\n      return elem !== undefined && elem !== null;\r\n    });\r\n    for (i in this.cards) {\r\n      if (this.cards.hasOwnProperty(i)) {\r\n        this.cards[+i].id = +i;\r\n      }\r\n    }\r\n\r\n    return this;\r\n  },\r\n  reRenderAllCards: function () {\r\n    this.cards.forEach((card) => {\r\n      card.derender();\r\n    });\r\n    this.renderAllCards();\r\n  },\r\n  renderAllCards: function () {\r\n    this.cards.forEach((card) => {\r\n      card.selected = this.selectedCard && (this.selectedCard.id === card.id);\r\n      Object.setPrototypeOf(card, Card);\r\n      card.render();\r\n    }\r\n    );\r\n\r\n    return this;\r\n  },\r\n  getInstance: function () {\r\n    if (CardManager.instance === undefined) {\r\n      CardManager.instance = Object.create(CardManager, {});\r\n      CardManager.instance.init();\r\n      pubsub.sub(window.CONFIG.SAVE_CARDS, CardManager.instance.saveCards, CardManager.instance);\r\n      pubsub.sub(window.CONFIG.SELECT_CARD, CardManager.instance.selectCard, CardManager.instance);\r\n      pubsub.sub(window.CONFIG.RERENDER, CardManager.instance.reRenderAllCards, CardManager.instance);\r\n      pubsub.sub(window.CONFIG.LESS_PRISTINE, CardManager.instance.lessPristine, CardManager.instance);\r\n    }\r\n\r\n    return CardManager.instance;\r\n  },\r\n  lessPristine: function () {\r\n    this.pristine--;\r\n  },\r\n  exportCards: function () {\r\n    return window.btoa(JSON.stringify(this.cards));\r\n  },\r\n  importCards: function (data) {\r\n    window.localStorage.setItem('cards', window.atob(data));\r\n    this.loadCards();\r\n    this.renderAllCards();\r\n  },\r\n  selectCard: function (cardId) {\r\n    if (this.selectedCard !== undefined && this.selectedCard.node.classList !== undefined) {\r\n      this.selectedCard.node.classList.remove('selected');\r\n    }\r\n    this.selectedCard = this.cards[cardId];\r\n\r\n    this.selectedCard.node.classList.add('selected');\r\n\r\n    this.persistSelectedCard();\r\n    document.activeElement.blur();\r\n  },\r\n  nextCard: function () {\r\n    let it = +this.selectedCard.id + 1;\r\n\r\n    while (it !== +this.selectedCard.id) {\r\n      if (this.cards[it] !== undefined && this.cards[it].isDeleted !== true) {\r\n        break;\r\n      }\r\n      if (++it >= this.cards.length) {\r\n        it = 0;\r\n      }\r\n    }\r\n\r\n    this.selectCard(it);\r\n  },\r\n  previousCard: function () {\r\n    let it = +this.selectedCard.id - 1;\r\n\r\n    while (it !== +this.selectedCard.id) {\r\n      if (this.cards[it] !== undefined) {\r\n        break;\r\n      }\r\n      if (--it <= 0) {\r\n        it = this.cards.length;\r\n      }\r\n    }\r\n\r\n    this.selectCard(it);\r\n  },\r\n  persistSelectedCard: function () {\r\n    if (this.selectedCard && this.selectedCard.id > -1) {\r\n      window.localStorage.setItem('selectedCard', this.selectedCard.id);\r\n    }\r\n  },\r\n  loadSelectedCard: function () {\r\n    let selectedCardId = +window.localStorage.getItem('selectedCard');\r\n\r\n    if (selectedCardId !== undefined && selectedCardId > -1) {\r\n      this.selectedCard = this.cards[selectedCardId];\r\n    }\r\n  },\r\n  persistDeletedCards: function () {\r\n    window.localStorage.setItem('deletedCards', JSON.stringify(this.deletedCards));\r\n  },\r\n  loadDeletedCards: function () {\r\n    this.deletedCards = JSON.parse(window.localStorage.getItem('deletedCards')) || [];\r\n  },\r\n  deleteCard: function (card) {\r\n    this.deletedCards.push(card.id);\r\n\r\n    card.delete();\r\n  },\r\n  undeleteLastCard: function () {\r\n    if (this.deletedCards.length === 0) {\r\n      return;\r\n    }\r\n\r\n    this.selectCard(this.cards[this.deletedCards.splice(this.deletedCards.length - 1)].undelete().id);\r\n\r\n    this.saveCards();\r\n  }\r\n};\r\n\r\nmodule.exports = CardManager;\r\n","let cardManager = require('./models/CardManager').getInstance();\r\n\r\nfunction createDiv (text, className) {\r\n  let div = document.createElement('div');\r\n  div.innerHTML = text;\r\n  div.style.float = 'right';\r\n  div.style.cursor = 'pointer';\r\n  div.style.width = 'auto';\r\n  div.style.textAlign = 'center';\r\n  div.style.margin = '0 3px';\r\n\r\n  if (className !== undefined) {\r\n    div.className = className;\r\n  }\r\n\r\n  return div;\r\n}\r\n\r\nfunction copySelectionText () {\r\n  let copysuccess; // let to check whether execCommand successfully executed\r\n  try {\r\n    copysuccess = document.execCommand('copy'); // run command to copy selected text to clipboard\r\n  } catch (e) {\r\n    copysuccess = false;\r\n  }\r\n  return copysuccess;\r\n}\r\n\r\nfunction selectText (element) {\r\n  let doc = document;\r\n  let text = element;\r\n  let range, selection\r\n    ;\r\n  if (doc.body.createTextRange) {\r\n    range = document.body.createTextRange();\r\n    range.moveToElementText(text);\r\n    range.select();\r\n  } else if (window.getSelection) {\r\n    selection = window.getSelection();\r\n    range = document.createRange();\r\n    range.selectNodeContents(text);\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n    return selection;\r\n  }\r\n}\r\n\r\nfunction getParentCardId (context) {\r\n  if (context.parentElement === null) return;\r\n  return parseInt(context.parentElement.id.split('_')[1]);\r\n}\r\n\r\nfunction getSomethingByclassName (context, classname) {\r\n  let res = context.getElementsByClassName(classname);\r\n\r\n  if (res.length === 0) {\r\n    res = context.parentElement.getElementsByClassName(classname);\r\n  }\r\n\r\n  return res;\r\n}\r\n\r\nfunction changeDepth (cardId, increment) {\r\n  let depth = cardManager.cards[cardId].depth + increment;\r\n\r\n  this.style.zIndex = depth;\r\n  cardManager.cards[cardId].depth = depth;\r\n\r\n  let elem = getSomethingByclassName(this, 'depth');\r\n  elem[0].innerHTML = depth;\r\n}\r\n\r\nfunction setDepth (cardId, depth) {\r\n  this.style.zIndex = depth;\r\n  cardManager.cards[cardId].depth = depth;\r\n\r\n  let elem = getSomethingByclassName(this, 'depth');\r\n  elem[0].innerHTML = depth;\r\n}\r\n\r\nfunction getCardHTMLById (mainContainer, id) {\r\n  return mainContainer.getElementById('todo_' + id);\r\n}\r\n\r\n// PROTOTYPES\r\n\r\n/*\r\n * Returns the size of an array\r\n */\r\nArray.prototype.size = function () {\r\n  return this.filter(function (a) {\r\n    return a !== undefined;\r\n  }).length;\r\n};\r\n\r\n/*\r\n * Returns the size of an object\r\n */\r\nObject.size = function (obj) {\r\n  let size = 0;\r\n  let key = '';\r\n\r\n  for (key in obj) {\r\n    if (obj.hasOwnProperty(key)) size++;\r\n  }\r\n  return size;\r\n};\r\n\r\nmodule.exports = {\r\n  createDiv: createDiv,\r\n  copySelectionText: copySelectionText,\r\n  selectText: selectText,\r\n  getParentCardId: getParentCardId,\r\n  changeDepth: changeDepth,\r\n  setDepth: setDepth,\r\n  getCardHTMLById: getCardHTMLById\r\n};\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvbXVybXVyaGFzaC1qcy9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9tdXJtdXJoYXNoLWpzL211cm11cmhhc2gyX2djLmpzIiwibm9kZV9tb2R1bGVzL211cm11cmhhc2gtanMvbXVybXVyaGFzaDNfZ2MuanMiLCJub2RlX21vZHVsZXMvcmFuZG9tLW1hdGVyaWFsLWNvbG9yL2Rpc3QvcmFuZG9tQ29sb3IuanMiLCJzcmMvanMvY29uZmlnLmpzIiwic3JjL2pzL2xpYi9rZXlIYW5kbGVyLmpzIiwic3JjL2pzL2xpYi9wdWJzdWIuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9tb2RlbHMvQ2FyZC5qcyIsInNyYy9qcy9tb2RlbHMvQ2FyZE1hbmFnZXIuanMiLCJzcmMvanMvcHJvdG90eXBlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4UkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIG11cm11cjMgPSByZXF1aXJlKFwiLi9tdXJtdXJoYXNoM19nYy5qc1wiKVxudmFyIG11cm11cjIgPSByZXF1aXJlKFwiLi9tdXJtdXJoYXNoMl9nYy5qc1wiKVxuXG5tb2R1bGUuZXhwb3J0cyA9IG11cm11cjNcbm1vZHVsZS5leHBvcnRzLm11cm11cjMgPSBtdXJtdXIzXG5tb2R1bGUuZXhwb3J0cy5tdXJtdXIyID0gbXVybXVyMlxuIiwiLyoqXG4gKiBKUyBJbXBsZW1lbnRhdGlvbiBvZiBNdXJtdXJIYXNoMlxuICogXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86Z2FyeS5jb3VydEBnbWFpbC5jb21cIj5HYXJ5IENvdXJ0PC9hPlxuICogQHNlZSBodHRwOi8vZ2l0aHViLmNvbS9nYXJ5Y291cnQvbXVybXVyaGFzaC1qc1xuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOmFhcHBsZWJ5QGdtYWlsLmNvbVwiPkF1c3RpbiBBcHBsZWJ5PC9hPlxuICogQHNlZSBodHRwOi8vc2l0ZXMuZ29vZ2xlLmNvbS9zaXRlL211cm11cmhhc2gvXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQVNDSUkgb25seVxuICogQHBhcmFtIHtudW1iZXJ9IHNlZWQgUG9zaXRpdmUgaW50ZWdlciBvbmx5XG4gKiBAcmV0dXJuIHtudW1iZXJ9IDMyLWJpdCBwb3NpdGl2ZSBpbnRlZ2VyIGhhc2hcbiAqL1xuXG5mdW5jdGlvbiBtdXJtdXJoYXNoMl8zMl9nYyhzdHIsIHNlZWQpIHtcbiAgdmFyXG4gICAgbCA9IHN0ci5sZW5ndGgsXG4gICAgaCA9IHNlZWQgXiBsLFxuICAgIGkgPSAwLFxuICAgIGs7XG4gIFxuICB3aGlsZSAobCA+PSA0KSB7XG4gIFx0ayA9IFxuICBcdCAgKChzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmYpKSB8XG4gIFx0ICAoKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCA4KSB8XG4gIFx0ICAoKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweGZmKSA8PCAxNikgfFxuICBcdCAgKChzdHIuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgMjQpO1xuICAgIFxuICAgIGsgPSAoKChrICYgMHhmZmZmKSAqIDB4NWJkMWU5OTUpICsgKCgoKGsgPj4+IDE2KSAqIDB4NWJkMWU5OTUpICYgMHhmZmZmKSA8PCAxNikpO1xuICAgIGsgXj0gayA+Pj4gMjQ7XG4gICAgayA9ICgoKGsgJiAweGZmZmYpICogMHg1YmQxZTk5NSkgKyAoKCgoayA+Pj4gMTYpICogMHg1YmQxZTk5NSkgJiAweGZmZmYpIDw8IDE2KSk7XG5cblx0aCA9ICgoKGggJiAweGZmZmYpICogMHg1YmQxZTk5NSkgKyAoKCgoaCA+Pj4gMTYpICogMHg1YmQxZTk5NSkgJiAweGZmZmYpIDw8IDE2KSkgXiBrO1xuXG4gICAgbCAtPSA0O1xuICAgICsraTtcbiAgfVxuICBcbiAgc3dpdGNoIChsKSB7XG4gIGNhc2UgMzogaCBePSAoc3RyLmNoYXJDb2RlQXQoaSArIDIpICYgMHhmZikgPDwgMTY7XG4gIGNhc2UgMjogaCBePSAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmZikgPDwgODtcbiAgY2FzZSAxOiBoIF49IChzdHIuY2hhckNvZGVBdChpKSAmIDB4ZmYpO1xuICAgICAgICAgIGggPSAoKChoICYgMHhmZmZmKSAqIDB4NWJkMWU5OTUpICsgKCgoKGggPj4+IDE2KSAqIDB4NWJkMWU5OTUpICYgMHhmZmZmKSA8PCAxNikpO1xuICB9XG5cbiAgaCBePSBoID4+PiAxMztcbiAgaCA9ICgoKGggJiAweGZmZmYpICogMHg1YmQxZTk5NSkgKyAoKCgoaCA+Pj4gMTYpICogMHg1YmQxZTk5NSkgJiAweGZmZmYpIDw8IDE2KSk7XG4gIGggXj0gaCA+Pj4gMTU7XG5cbiAgcmV0dXJuIGggPj4+IDA7XG59XG5cbmlmKHR5cGVvZiBtb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuICBtb2R1bGUuZXhwb3J0cyA9IG11cm11cmhhc2gyXzMyX2djXG59XG4iLCIvKipcbiAqIEpTIEltcGxlbWVudGF0aW9uIG9mIE11cm11ckhhc2gzIChyMTM2KSAoYXMgb2YgTWF5IDIwLCAyMDExKVxuICogXG4gKiBAYXV0aG9yIDxhIGhyZWY9XCJtYWlsdG86Z2FyeS5jb3VydEBnbWFpbC5jb21cIj5HYXJ5IENvdXJ0PC9hPlxuICogQHNlZSBodHRwOi8vZ2l0aHViLmNvbS9nYXJ5Y291cnQvbXVybXVyaGFzaC1qc1xuICogQGF1dGhvciA8YSBocmVmPVwibWFpbHRvOmFhcHBsZWJ5QGdtYWlsLmNvbVwiPkF1c3RpbiBBcHBsZWJ5PC9hPlxuICogQHNlZSBodHRwOi8vc2l0ZXMuZ29vZ2xlLmNvbS9zaXRlL211cm11cmhhc2gvXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgQVNDSUkgb25seVxuICogQHBhcmFtIHtudW1iZXJ9IHNlZWQgUG9zaXRpdmUgaW50ZWdlciBvbmx5XG4gKiBAcmV0dXJuIHtudW1iZXJ9IDMyLWJpdCBwb3NpdGl2ZSBpbnRlZ2VyIGhhc2ggXG4gKi9cblxuZnVuY3Rpb24gbXVybXVyaGFzaDNfMzJfZ2Moa2V5LCBzZWVkKSB7XG5cdHZhciByZW1haW5kZXIsIGJ5dGVzLCBoMSwgaDFiLCBjMSwgYzFiLCBjMiwgYzJiLCBrMSwgaTtcblx0XG5cdHJlbWFpbmRlciA9IGtleS5sZW5ndGggJiAzOyAvLyBrZXkubGVuZ3RoICUgNFxuXHRieXRlcyA9IGtleS5sZW5ndGggLSByZW1haW5kZXI7XG5cdGgxID0gc2VlZDtcblx0YzEgPSAweGNjOWUyZDUxO1xuXHRjMiA9IDB4MWI4NzM1OTM7XG5cdGkgPSAwO1xuXHRcblx0d2hpbGUgKGkgPCBieXRlcykge1xuXHQgIFx0azEgPSBcblx0ICBcdCAgKChrZXkuY2hhckNvZGVBdChpKSAmIDB4ZmYpKSB8XG5cdCAgXHQgICgoa2V5LmNoYXJDb2RlQXQoKytpKSAmIDB4ZmYpIDw8IDgpIHxcblx0ICBcdCAgKChrZXkuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgMTYpIHxcblx0ICBcdCAgKChrZXkuY2hhckNvZGVBdCgrK2kpICYgMHhmZikgPDwgMjQpO1xuXHRcdCsraTtcblx0XHRcblx0XHRrMSA9ICgoKChrMSAmIDB4ZmZmZikgKiBjMSkgKyAoKCgoazEgPj4+IDE2KSAqIGMxKSAmIDB4ZmZmZikgPDwgMTYpKSkgJiAweGZmZmZmZmZmO1xuXHRcdGsxID0gKGsxIDw8IDE1KSB8IChrMSA+Pj4gMTcpO1xuXHRcdGsxID0gKCgoKGsxICYgMHhmZmZmKSAqIGMyKSArICgoKChrMSA+Pj4gMTYpICogYzIpICYgMHhmZmZmKSA8PCAxNikpKSAmIDB4ZmZmZmZmZmY7XG5cblx0XHRoMSBePSBrMTtcbiAgICAgICAgaDEgPSAoaDEgPDwgMTMpIHwgKGgxID4+PiAxOSk7XG5cdFx0aDFiID0gKCgoKGgxICYgMHhmZmZmKSAqIDUpICsgKCgoKGgxID4+PiAxNikgKiA1KSAmIDB4ZmZmZikgPDwgMTYpKSkgJiAweGZmZmZmZmZmO1xuXHRcdGgxID0gKCgoaDFiICYgMHhmZmZmKSArIDB4NmI2NCkgKyAoKCgoaDFiID4+PiAxNikgKyAweGU2NTQpICYgMHhmZmZmKSA8PCAxNikpO1xuXHR9XG5cdFxuXHRrMSA9IDA7XG5cdFxuXHRzd2l0Y2ggKHJlbWFpbmRlcikge1xuXHRcdGNhc2UgMzogazEgXj0gKGtleS5jaGFyQ29kZUF0KGkgKyAyKSAmIDB4ZmYpIDw8IDE2O1xuXHRcdGNhc2UgMjogazEgXj0gKGtleS5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmYpIDw8IDg7XG5cdFx0Y2FzZSAxOiBrMSBePSAoa2V5LmNoYXJDb2RlQXQoaSkgJiAweGZmKTtcblx0XHRcblx0XHRrMSA9ICgoKGsxICYgMHhmZmZmKSAqIGMxKSArICgoKChrMSA+Pj4gMTYpICogYzEpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcblx0XHRrMSA9IChrMSA8PCAxNSkgfCAoazEgPj4+IDE3KTtcblx0XHRrMSA9ICgoKGsxICYgMHhmZmZmKSAqIGMyKSArICgoKChrMSA+Pj4gMTYpICogYzIpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcblx0XHRoMSBePSBrMTtcblx0fVxuXHRcblx0aDEgXj0ga2V5Lmxlbmd0aDtcblxuXHRoMSBePSBoMSA+Pj4gMTY7XG5cdGgxID0gKCgoaDEgJiAweGZmZmYpICogMHg4NWViY2E2YikgKyAoKCgoaDEgPj4+IDE2KSAqIDB4ODVlYmNhNmIpICYgMHhmZmZmKSA8PCAxNikpICYgMHhmZmZmZmZmZjtcblx0aDEgXj0gaDEgPj4+IDEzO1xuXHRoMSA9ICgoKChoMSAmIDB4ZmZmZikgKiAweGMyYjJhZTM1KSArICgoKChoMSA+Pj4gMTYpICogMHhjMmIyYWUzNSkgJiAweGZmZmYpIDw8IDE2KSkpICYgMHhmZmZmZmZmZjtcblx0aDEgXj0gaDEgPj4+IDE2O1xuXG5cdHJldHVybiBoMSA+Pj4gMDtcbn1cblxuaWYodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBtb2R1bGUuZXhwb3J0cyA9IG11cm11cmhhc2gzXzMyX2djXG59IiwidmFyIGRlZmF1bHRQYWxldHRlPXs1MDpbXCIjRkZFQkVFXCIsXCIjRkNFNEVDXCIsXCIjRjNFNUY1XCIsXCIjRURFN0Y2XCIsXCIjRThFQUY2XCIsXCIjRTNGMkZEXCIsXCIjRTFGNUZFXCIsXCIjRTBGN0ZBXCIsXCIjRTBGMkYxXCIsXCIjRThGNUU5XCIsXCIjRjFGOEU5XCIsXCIjRjlGQkU3XCIsXCIjRkZGREU3XCIsXCIjRkZGOEUxXCIsXCIjRkZGM0UwXCIsXCIjRkJFOUU3XCIsXCIjRUZFQkU5XCIsXCIjRkFGQUZBXCIsXCIjRUNFRkYxXCJdLDEwMDpbXCIjRkZDREQyXCIsXCIjRjhCQkQwXCIsXCIjRTFCRUU3XCIsXCIjRDFDNEU5XCIsXCIjQzVDQUU5XCIsXCIjQkJERUZCXCIsXCIjQjNFNUZDXCIsXCIjQjJFQkYyXCIsXCIjQjJERkRCXCIsXCIjQzhFNkM5XCIsXCIjRENFREM4XCIsXCIjRjBGNEMzXCIsXCIjRkZGOUM0XCIsXCIjRkZFQ0IzXCIsXCIjRkZFMEIyXCIsXCIjRkZDQ0JDXCIsXCIjRDdDQ0M4XCIsXCIjRjVGNUY1XCIsXCIjQ0ZEOERDXCJdLDIwMDpbXCIjRUY5QTlBXCIsXCIjRjQ4RkIxXCIsXCIjQ0U5M0Q4XCIsXCIjQjM5RERCXCIsXCIjOUZBOERBXCIsXCIjOTBDQUY5XCIsXCIjODFENEZBXCIsXCIjODBERUVBXCIsXCIjODBDQkM0XCIsXCIjQTVENkE3XCIsXCIjQzVFMUE1XCIsXCIjRTZFRTlDXCIsXCIjRkZGNTlEXCIsXCIjRkZFMDgyXCIsXCIjRkZDQzgwXCIsXCIjRkZBQjkxXCIsXCIjQkNBQUE0XCIsXCIjRUVFRUVFXCIsXCIjQjBCRUM1XCJdLDMwMDpbXCIjRTU3MzczXCIsXCIjRjA2MjkyXCIsXCIjQkE2OEM4XCIsXCIjOTU3NUNEXCIsXCIjNzk4NkNCXCIsXCIjNjRCNUY2XCIsXCIjNEZDM0Y3XCIsXCIjNEREMEUxXCIsXCIjNERCNkFDXCIsXCIjODFDNzg0XCIsXCIjQUVENTgxXCIsXCIjRENFNzc1XCIsXCIjRkZGMTc2XCIsXCIjRkZENTRGXCIsXCIjRkZCNzREXCIsXCIjRkY4QTY1XCIsXCIjQTE4ODdGXCIsXCIjRTBFMEUwXCIsXCIjOTBBNEFFXCJdLDQwMDpbXCIjRUY1MzUwXCIsXCIjRUM0MDdBXCIsXCIjQUI0N0JDXCIsXCIjN0U1N0MyXCIsXCIjNUM2QkMwXCIsXCIjNDJBNUY1XCIsXCIjMjlCNkY2XCIsXCIjMjZDNkRBXCIsXCIjMjZBNjlBXCIsXCIjNjZCQjZBXCIsXCIjOUNDQzY1XCIsXCIjRDRFMTU3XCIsXCIjRkZFRTU4XCIsXCIjRkZDQTI4XCIsXCIjRkZBNzI2XCIsXCIjRkY3MDQzXCIsXCIjOEQ2RTYzXCIsXCIjQkRCREJEXCIsXCIjNzg5MDlDXCJdLDUwMDpbXCIjRjQ0MzM2XCIsXCIjRTkxRTYzXCIsXCIjOUMyN0IwXCIsXCIjNjczQUI3XCIsXCIjM0Y1MUI1XCIsXCIjMjE5NkYzXCIsXCIjMDNBOUY0XCIsXCIjMDBCQ0Q0XCIsXCIjMDA5Njg4XCIsXCIjNENBRjUwXCIsXCIjOEJDMzRBXCIsXCIjQ0REQzM5XCIsXCIjRkZFQjNCXCIsXCIjRkZDMTA3XCIsXCIjRkY5ODAwXCIsXCIjRkY1NzIyXCIsXCIjNzk1NTQ4XCIsXCIjOUU5RTlFXCIsXCIjNjA3RDhCXCJdLDYwMDpbXCIjRTUzOTM1XCIsXCIjRDgxQjYwXCIsXCIjOEUyNEFBXCIsXCIjNUUzNUIxXCIsXCIjMzk0OUFCXCIsXCIjMUU4OEU1XCIsXCIjMDM5QkU1XCIsXCIjMDBBQ0MxXCIsXCIjMDA4OTdCXCIsXCIjNDNBMDQ3XCIsXCIjN0NCMzQyXCIsXCIjQzBDQTMzXCIsXCIjRkREODM1XCIsXCIjRkZCMzAwXCIsXCIjRkI4QzAwXCIsXCIjRjQ1MTFFXCIsXCIjNkQ0QzQxXCIsXCIjNzU3NTc1XCIsXCIjNTQ2RTdBXCJdLDcwMDpbXCIjRDMyRjJGXCIsXCIjQzIxODVCXCIsXCIjN0IxRkEyXCIsXCIjNTEyREE4XCIsXCIjMzAzRjlGXCIsXCIjMTk3NkQyXCIsXCIjMDI4OEQxXCIsXCIjMDA5N0E3XCIsXCIjMDA3OTZCXCIsXCIjMzg4RTNDXCIsXCIjNjg5RjM4XCIsXCIjQUZCNDJCXCIsXCIjRkJDMDJEXCIsXCIjRkZBMDAwXCIsXCIjRjU3QzAwXCIsXCIjRTY0QTE5XCIsXCIjNUQ0MDM3XCIsXCIjNjE2MTYxXCIsXCIjNDU1QTY0XCJdLDgwMDpbXCIjQzYyODI4XCIsXCIjQUQxNDU3XCIsXCIjNkExQjlBXCIsXCIjNDUyN0EwXCIsXCIjMjgzNTkzXCIsXCIjMTU2NUMwXCIsXCIjMDI3N0JEXCIsXCIjMDA4MzhGXCIsXCIjMDA2OTVDXCIsXCIjMkU3RDMyXCIsXCIjNTU4QjJGXCIsXCIjOUU5RDI0XCIsXCIjRjlBODI1XCIsXCIjRkY4RjAwXCIsXCIjRUY2QzAwXCIsXCIjRDg0MzE1XCIsXCIjNEUzNDJFXCIsXCIjNDI0MjQyXCIsXCIjMzc0NzRGXCJdLDkwMDpbXCIjQjcxQzFDXCIsXCIjODgwRTRGXCIsXCIjNEExNDhDXCIsXCIjMzExQjkyXCIsXCIjMUEyMzdFXCIsXCIjMEQ0N0ExXCIsXCIjMDE1NzlCXCIsXCIjMDA2MDY0XCIsXCIjMDA0RDQwXCIsXCIjMUI1RTIwXCIsXCIjMzM2OTFFXCIsXCIjODI3NzE3XCIsXCIjRjU3RjE3XCIsXCIjRkY2RjAwXCIsXCIjRTY1MTAwXCIsXCIjQkYzNjBDXCIsXCIjM0UyNzIzXCIsXCIjMjEyMTIxXCIsXCIjMjYzMjM4XCJdLEExMDA6W1wiI0ZGOEE4MFwiLFwiI0ZGODBBQlwiLFwiI0VBODBGQ1wiLFwiI0IzODhGRlwiLFwiIzhDOUVGRlwiLFwiIzgyQjFGRlwiLFwiIzgwRDhGRlwiLFwiIzg0RkZGRlwiLFwiI0E3RkZFQlwiLFwiI0I5RjZDQVwiLFwiI0NDRkY5MFwiLFwiI0Y0RkY4MVwiLFwiI0ZGRkY4RFwiLFwiI0ZGRTU3RlwiLFwiI0ZGRDE4MFwiLFwiI0ZGOUU4MFwiXSxBMjAwOltcIiNGRjUyNTJcIixcIiNGRjQwODFcIixcIiNFMDQwRkJcIixcIiM3QzRERkZcIixcIiM1MzZERkVcIixcIiM0NDhBRkZcIixcIiM0MEM0RkZcIixcIiMxOEZGRkZcIixcIiM2NEZGREFcIixcIiM2OUYwQUVcIixcIiNCMkZGNTlcIixcIiNFRUZGNDFcIixcIiNGRkZGMDBcIixcIiNGRkQ3NDBcIixcIiNGRkFCNDBcIixcIiNGRjZFNDBcIl0sQTQwMDpbXCIjRkYxNzQ0XCIsXCIjRjUwMDU3XCIsXCIjRDUwMEY5XCIsXCIjNjUxRkZGXCIsXCIjM0Q1QUZFXCIsXCIjMjk3OUZGXCIsXCIjMDBCMEZGXCIsXCIjMDBFNUZGXCIsXCIjMURFOUI2XCIsXCIjMDBFNjc2XCIsXCIjNzZGRjAzXCIsXCIjQzZGRjAwXCIsXCIjRkZFQTAwXCIsXCIjRkZDNDAwXCIsXCIjRkY5MTAwXCIsXCIjRkYzRDAwXCJdLEE3MDA6W1wiI0Q1MDAwMFwiLFwiI0M1MTE2MlwiLFwiI0FBMDBGRlwiLFwiIzYyMDBFQVwiLFwiIzMwNEZGRVwiLFwiIzI5NjJGRlwiLFwiIzAwOTFFQVwiLFwiIzAwQjhENFwiLFwiIzAwQkZBNVwiLFwiIzAwQzg1M1wiLFwiIzY0REQxN1wiLFwiI0FFRUEwMFwiLFwiI0ZGRDYwMFwiLFwiI0ZGQUIwMFwiLFwiI0ZGNkQwMFwiLFwiI0REMkMwMFwiXX0sbXVybXVyPXJlcXVpcmUoXCJtdXJtdXJoYXNoLWpzXCIpO21vZHVsZS5leHBvcnRzPWZ1bmN0aW9uKCl7dmFyIEY9W10sRT17c2hhZGVzOltcIjUwMFwiXSxwYWxldHRlOmRlZmF1bHRQYWxldHRlLHRleHQ6bnVsbCxpZ25vcmVDb2xvcnM6W119LEM9ZnVuY3Rpb24oQyl7Q3x8KEM9RSksQy5wYWxldHRlfHwoQy5wYWxldHRlPWRlZmF1bHRQYWxldHRlKSxDLnNoYWRlc3x8KEMuc2hhZGVzPVtcIjUwMFwiXSk7Zm9yKHZhciBCLEQ9Ri5sZW5ndGgsdD0wO0Q+dDt0KyspaWYoQy50ZXh0JiZGW3RdLnRleHQ9PT1DLnRleHQpcmV0dXJuIEZbdF0uY29sb3I7cmV0dXJuIEI9QShDKSxDLnRleHQmJkYucHVzaCh7dGV4dDpDLnRleHQsY29sb3I6Qn0pLEJ9LEE9ZnVuY3Rpb24oRil7dmFyIEU9Ri5zaGFkZXNbQihGLnNoYWRlcy5sZW5ndGgpXSxDPVwiXCI7Zm9yKHZhciBBIGluIEYucGFsZXR0ZSlGLnBhbGV0dGUuaGFzT3duUHJvcGVydHkoQSkmJkE9PT1FJiYoQz1GLnRleHQ/Ri5wYWxldHRlW0FdW0QoRi50ZXh0LEYucGFsZXR0ZVtBXS5sZW5ndGgpXTpGLnBhbGV0dGVbQV1bQihGLnBhbGV0dGVbQV0ubGVuZ3RoKV0pO3JldHVybiBDfSxCPWZ1bmN0aW9uKEYpe3JldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqRil9LEQ9ZnVuY3Rpb24oRixFKXt2YXIgQz1tdXJtdXIubXVybXVyMyhGKS8xZTEwO3JldHVybi4xPkMmJihDPTEwKkMpLE1hdGguZmxvb3IoQypFKX07cmV0dXJue2dldENvbG9yOkN9fSgpOyIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIFNBVkVfQ0FSRFM6ICdTQVZFX0NBUkRTJyxcclxuICBTRUxFQ1RfQ0FSRDogJ1NFTEVDVF9DQVJEJyxcclxuICBSRVJFTkRFUjogJ1JFUkVOREVSJyxcclxuICBMRVNTX1BSSVNUSU5FOiAnTEVTU19QUklTVElORScsXHJcbiAgQVNDSUk6IHtcclxuICAgIEVTQ0FQRV9LRVk6IDI3LFxyXG4gICAgVEFCX0tFWTogOSxcclxuICAgIENfS0VZOiA2NyxcclxuICAgIERfS0VZOiA2OCxcclxuICAgIEVfS0VZOiA2OSxcclxuICAgIFBMVVNfS0VZOiAxODcsXHJcbiAgICBNSU5VU19LRVk6IDE4OSxcclxuICAgIERPVF9LRVk6IDE5MCxcclxuICAgIEFfS0VZOiA2NSxcclxuICAgIElfS0VZOiA3MyxcclxuICAgIFJfS0VZOiA4MixcclxuICAgIFpfS0VZOiA5MCxcclxuICAgIENNRF9LRVk6IDkxLFxyXG4gICAgS0VZU19BUlJBWTogWzI3LCA5LCA2NywgNjgsIDY5LCAxODcsIDE4OSwgMTkwLCA2NSwgNzMsIDgyLCA5MCwgOTFdXHJcbiAgfSxcclxuICBERUZBVUxUX0NPTlRFTlQ6ICdXM3NpYVdRaU9qQXNJblJwZEd4bElqb2lNU0lzSW1SbGMyTnlhWEIwYVc5dUlqb2lWWE5sSUhSaFlpQmhibVFnYzJocFpuUWdkR0ZpSUhSdklHTnBjbU5zWlNCaVpYUjNaV1Z1SUdOaGNtUnpJRHBFWEc1Y2JrUnlZV2RuYVc1bklHOXlJR05zYVdOcmFXNW5JSFJvWlcwZ2QybHNiQ0JoYkhOdklHMWhjbXNnZEdobGJTQmhjeUJ6Wld4bFkzUmxaQ0lzSW1SbGNIUm9Jam8xTENKNElqb3hOamtzSW5raU9qYzVMQ0pqYjJ4dmNpSTZJaU5CTlVRMlFUY2lMQ0p6Wld4bFkzUmxaQ0k2ZEhKMVpTd2lhWE5CY21Ob2FYWmxaQ0k2Wm1Gc2MyVXNJbWx6UkdWc1pYUmxaQ0k2Wm1Gc2MyVXNJbU55WldGMFpXUkJkQ0k2TVRVd056WTBOamMxT0RFNE5pd2lZWEpqYUdsMlpXUkJkQ0k2Ym5Wc2JDd2libTlrWlNJNmV5SnFVWFZsY25reE56SXdOREkwTnpFNE1UZzFOekV5T1RZME1EVWlPalI5ZlN4N0ltbGtJam94TENKMGFYUnNaU0k2SWpJaUxDSmtaWE5qY21sd2RHbHZiaUk2SWs5dUlHRWdiV0Z5YTJWa0lHTmhjbVFnZFhObElHTjBjbXdnS3pwY2JpZGpKeUIwYnlCamIzQjVJSFJvWlNCamIyNTBaVzUwWEc0blpDY2dkRzhnWkdWc1pYUmxJR2wwWEc0blpTY2dkRzhnWldScGRDQnBkRnh1SjJFbklIUnZJR0Z5WTJocGRtVWdiM0lnWkdWaGNtTm9hWFpsSUdSbElHTmhjbVFpTENKa1pYQjBhQ0k2TlN3aWVDSTZNemd5TENKNUlqbzNOaXdpWTI5c2IzSWlPaUlqUVVWRU5UZ3hJaXdpYzJWc1pXTjBaV1FpT21aaGJITmxMQ0pwYzBGeVkyaHBkbVZrSWpwbVlXeHpaU3dpYVhORVpXeGxkR1ZrSWpwbVlXeHpaU3dpWTNKbFlYUmxaRUYwSWpveE5UQTNOalEyTnpjeE56UXdMQ0poY21Ob2FYWmxaRUYwSWpwdWRXeHNMQ0p1YjJSbElqcDdJbXBSZFdWeWVURTNNakEwTWpRM01UZ3hPRFUzTVRJNU5qUXdOU0k2T0gxOUxIc2lhV1FpT2pJc0luUnBkR3hsSWpvaVpXNTBaWEp6SWl3aVpHVnpZM0pwY0hScGIyNGlPaUpYYUdsc1pTQmxaR2wwYVc1bklIVnpaU0J6YUdsbWRDQXJJR1Z1ZEdWeUlIUnZJRnh1YVc1elpYSjBYRzVoWEc1c2FXNWxYRzVpY21WaGExeHVPa1FpTENKa1pYQjBhQ0k2TlN3aWVDSTZNVFU1TENKNUlqb3pNVElzSW1OdmJHOXlJam9pSTBaR1FqYzBSQ0lzSW5ObGJHVmpkR1ZrSWpwbVlXeHpaU3dpYVhOQmNtTm9hWFpsWkNJNlptRnNjMlVzSW1selJHVnNaWFJsWkNJNlptRnNjMlVzSW1OeVpXRjBaV1JCZENJNk1UVXdOelkwTmpjNU1qSTVOeXdpWVhKamFHbDJaV1JCZENJNmJuVnNiQ3dpYm05a1pTSTZleUpxVVhWbGNua3hOekl3TkRJME56RTRNVGcxTnpFeU9UWTBNRFVpT2paOWZTeDdJbWxrSWpvekxDSjBhWFJzWlNJNklrZGxibVZ5YVdNaUxDSmtaWE5qY21sd2RHbHZiaUk2SWxsdmRTQmpZVzRnWVd4emJ5QjFjMlVnWjJWdVpYSnBZeUJqYjIxdFlXNWtjeUJ6ZFdOb0lHRnpJR04wY213clhHNG5hU2NnZEc4Z1kzSmxZWFJsSUdFZ1kyRnlaRnh1SjNvbklIUnZJSEpsZG1sMlpTQjBhR1VnYkdGemRDQmtaV3hsZEdWa0lHTmhjbVFpTENKa1pYQjBhQ0k2TlN3aWVDSTZORFF4TENKNUlqb3lPVFlzSW1OdmJHOXlJam9pSTBaR1JUQTRNaUlzSW5ObGJHVmpkR1ZrSWpwbVlXeHpaU3dpYVhOQmNtTm9hWFpsWkNJNlptRnNjMlVzSW1selJHVnNaWFJsWkNJNlptRnNjMlVzSW1OeVpXRjBaV1JCZENJNk1UVXdOelkwT0RZek9ETTROaXdpWVhKamFHbDJaV1JCZENJNmJuVnNiQ3dpYVhOUWNtbHpkR2x1WlNJNlptRnNjMlVzSW01dlpHVWlPbnNpYWxGMVpYSjVNVGN5TURReU5EY3hPREU0TlRjeE1qazJOREExSWpveE1IMTlYUScsXHJcbiAgVkVSU0lPTjogJzAuNS4wJ1xyXG59O1xyXG4iLCJjb25zdCBDT05GSUcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcclxuXHJcbmxldCBjYXJkTWFuYWdlcjtcclxubGV0IENhcmQgPSByZXF1aXJlKCcuLi9tb2RlbHMvQ2FyZCcpO1xyXG5cclxubGV0IG1haW5Db250YWluZXIsXHJcbiAgZWRpdENvbnRhaW5lcixcclxuICBlZGl0SW5wdXQsXHJcbiAgdGl0bGVJbnB1dCxcclxuICBpbXBvcnRDb250YWluZXIsXHJcbiAgaW1wb3J0SW5wdXQsXHJcbiAgZXhwb3J0Q29udGFpbmVyLFxyXG4gIGV4cG9ydENvbnRlbnQsXHJcbiAgaW1wb3J0QnV0dG9uO1xyXG5cclxuZnVuY3Rpb24gaW5pdCAob3B0aW9ucykge1xyXG4gIGNhcmRNYW5hZ2VyID0gb3B0aW9ucy5jYXJkTWFuYWdlcjtcclxuICBiaW5kaW5ncygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kaW5ncyAoKSB7XHJcbiAgbWFpbkNvbnRhaW5lciA9ICQoJyNtYWluQ29udGFpbmVyJyk7XHJcbiAgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Q29udGFpbmVyJyk7XHJcbiAgZWRpdElucHV0ID0gZWRpdENvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXh0YXJlYScpWzBdO1xyXG4gIHRpdGxlSW5wdXQgPSBlZGl0Q29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2lucHV0JylbMF07XHJcbiAgaW1wb3J0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltcG9ydENvbnRhaW5lcicpO1xyXG4gIGltcG9ydElucHV0ID0gaW1wb3J0Q29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2lucHV0JylbMF07XHJcbiAgaW1wb3J0QnV0dG9uID0gaW1wb3J0Q29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2J1dHRvbicpWzBdO1xyXG4gIGV4cG9ydENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnRDb250YWluZXInKTtcclxuICBleHBvcnRDb250ZW50ID0gZXhwb3J0Q29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdkaXYnKVswXTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywga2V5SGFuZGxlclVwLCBmYWxzZSk7XHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBrZXlIYW5kbGVyRG93biwgZmFsc2UpO1xyXG4gIGVkaXRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZWRpdElucHV0S2V5RXZlbnQpO1xyXG4gIHRpdGxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVkaXRJbnB1dEtleUV2ZW50KTtcclxuICBlZGl0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUVkaXRDb250YWluZXIpO1xyXG4gIGVkaXRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BQcm9wYWdhdGlvbik7XHJcbiAgdGl0bGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BQcm9wYWdhdGlvbik7XHJcbiAgLypcclxuICAgICBPbiBkb3VibGUgY2xpY2sgZWRpdCB0aGUgY2FyZFxyXG4gICAgICovXHJcbiAgbWFpbkNvbnRhaW5lci5vbignZGJsY2xpY2snLCAnZGl2JywgZG91YmxlQ2xpY2tIYW5kbGVyKTtcclxuICAvKlxyXG4gICAgIE9uIGNsaWNrIHBlcmZvcm0gdGhlIGNhcmRcclxuICAgICAqL1xyXG4gIG1haW5Db250YWluZXIub24oJ2NsaWNrJywgJ2RpdicsIGNhcmRDbGlja0V2ZW50cyk7XHJcbiAgbWFpbkNvbnRhaW5lci5vbignY2xpY2snLCAnZGl2ID4gZGl2JywgY2FyZE1lbnVFdmVudHMpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdleHBvcnQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV4cG9ydENhcmRzKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1wb3J0JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzaG93SW1wb3J0ZXIpO1xyXG4gIGltcG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGxvYWRJbXBvcnRDYXJkc0NvZGUpO1xyXG4gIGltcG9ydENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhpZGVJbXBvcnRDb250YWluZXIpO1xyXG4gIGltcG9ydElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBpbXBvcnRJbnB1dEtleUV2ZW50KTtcclxuICBpbXBvcnRJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BQcm9wYWdhdGlvbik7XHJcbiAgZXhwb3J0Q29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGlkZUV4cG9ydENvbnRhaW5lcik7XHJcbiAgZXhwb3J0Q29udGVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0b3BQcm9wYWdhdGlvbik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGtleUhhbmRsZXJEb3duIChlKSB7XHJcbiAgaWYgKGUua2V5Q29kZSA9PT0gQ09ORklHLkFTQ0lJLlRBQl9LRVkpIHtcclxuICAgIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1cigpO1xyXG4gICAgaWYgKGUuc2hpZnRLZXkpIHtcclxuICAgICAgY2FyZE1hbmFnZXIucHJldmlvdXNDYXJkKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYXJkTWFuYWdlci5uZXh0Q2FyZCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBDT05GSUcuQVNDSUkuQ01EX0tFWSkge1xyXG4gICAgd2luZG93LmNtZFByZXNzID0gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGtleUhhbmRsZXJVcCAoZSkge1xyXG4gIGNvbnNvbGUubG9nKGUua2V5Q29kZSk7XHJcbiAgY29uc29sZS5sb2coZG9jdW1lbnQuYWN0aXZlRWxlbWVudCk7XHJcbiAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IGRvY3VtZW50LmJvZHkgfHwgQ09ORklHLkFTQ0lJLktFWVNfQVJSQVkuaW5kZXhPZihlLmtleUNvZGUpID09PSAtMSkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgc3dpdGNoIChlLmtleUNvZGUpIHtcclxuICAgIGNhc2UgQ09ORklHLkFTQ0lJLkNfS0VZOlxyXG4gICAgICBsZXQgZWxlbSA9IGNhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5ub2RlO1xyXG4gICAgICBsZXQgc2VsZWN0aW9uO1xyXG5cclxuICAgICAgc2VsZWN0aW9uID0gc2VsZWN0VGV4dChlbGVtLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NhcmRUZXh0JylbMF0pO1xyXG4gICAgICBjb3B5U2VsZWN0aW9uVGV4dCgpO1xyXG4gICAgICBzZWxlY3Rpb24uZW1wdHkoKTtcclxuXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBDT05GSUcuQVNDSUkuRF9LRVk6XHJcbiAgICAgIGxldCBjYXJkID0gY2FyZE1hbmFnZXIuc2VsZWN0ZWRDYXJkO1xyXG4gICAgICBjYXJkTWFuYWdlci5uZXh0Q2FyZCgpO1xyXG4gICAgICBjYXJkTWFuYWdlci5kZWxldGVDYXJkKGNhcmQpO1xyXG4gICAgICBjYXJkTWFuYWdlci5zYXZlQ2FyZHMoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIENPTkZJRy5BU0NJSS5FX0tFWTpcclxuICAgICAgZG91YmxlQ2xpY2tIYW5kbGVyLmFwcGx5KGNhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5ub2RlKTtcclxuXHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBDT05GSUcuQVNDSUkuQV9LRVk6XHJcbiAgICAgIGNhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC50b2dnbGVBcmNoaXZlZCgpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgQ09ORklHLkFTQ0lJLklfS0VZOlxyXG4gICAgICAvLyBpbnB1dC5mb2N1cygpO1xyXG4gICAgICBjcmVhdGVDYXJkKCk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBDT05GSUcuQVNDSUkuUExVU19LRVk6XHJcbiAgICAgIGNoYW5nZURlcHRoLmFwcGx5KGNhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5ub2RlLCBbY2FyZE1hbmFnZXIuc2VsZWN0ZWRDYXJkLmlkLCAxXSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSBDT05GSUcuQVNDSUkuTUlOVVNfS0VZOlxyXG4gICAgICBjaGFuZ2VEZXB0aC5hcHBseShjYXJkTWFuYWdlci5zZWxlY3RlZENhcmQubm9kZSwgW2NhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5pZCwgLTFdKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIENPTkZJRy5BU0NJSS5ET1RfS0VZOlxyXG4gICAgICBzZXREZXB0aC5hcHBseShjYXJkTWFuYWdlci5zZWxlY3RlZENhcmQubm9kZSwgW2NhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5pZCwgNV0pO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgQ09ORklHLkFTQ0lJLlJfS0VZOlxyXG4gICAgICBjYXJkTWFuYWdlci5zZWxlY3RlZENhcmQuY29sb3IgPSBjYXJkTWFuYWdlci5zZWxlY3RlZENhcmQuZ2V0QmFja2dyb3VuZENvbG9yKCk7XHJcbiAgICAgIGNhcmRNYW5hZ2VyLnNlbGVjdGVkQ2FyZC5kZXJlbmRlcigpO1xyXG4gICAgICBjYXJkTWFuYWdlci5zZWxlY3RlZENhcmQucmVuZGVyKCk7XHJcblxyXG4gICAgICBjYXJkTWFuYWdlci5zYXZlQ2FyZHMoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlIENPTkZJRy5BU0NJSS5aX0tFWTpcclxuICAgICAgY2FyZE1hbmFnZXIudW5kZWxldGVMYXN0Q2FyZCgpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgQ09ORklHLkFTQ0lJLkNNRF9LRVk6XHJcbiAgICAgIHdpbmRvdy5jbWRQcmVzcyA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGlkZUV4cG9ydENvbnRhaW5lciAoKSB7XHJcbiAgZXhwb3J0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVFZGl0Q29udGFpbmVyICgpIHtcclxuICBlZGl0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVJbXBvcnRDb250YWluZXIgKCkge1xyXG4gIGltcG9ydENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wUHJvcGFnYXRpb24gKGUpIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0SW5wdXRLZXlFdmVudCAoZXZlbnQpIHtcclxuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICBsZXQgY2FyZDtcclxuICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMgJiYgZXZlbnQuc2hpZnRLZXkpIHJldHVybjtcclxuICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgIGNhcmQgPSBjYXJkTWFuYWdlci5jYXJkc1tlZGl0Q29udGFpbmVyLmNhcmRJZF07XHJcbiAgICBjYXJkLnRpdGxlID0gdGl0bGVJbnB1dC52YWx1ZTtcclxuICAgIGNhcmQuZGVzY3JpcHRpb24gPSBlZGl0SW5wdXQudmFsdWU7XHJcbiAgICBjYXJkLmRlcmVuZGVyKCk7XHJcbiAgICBjYXJkLnJlbmRlcigpO1xyXG4gICAgdGhpcy52YWx1ZSA9ICcnO1xyXG4gICAgY2FyZE1hbmFnZXIuc2F2ZUNhcmRzKCk7XHJcbiAgICBoaWRlRWRpdENvbnRhaW5lcigpO1xyXG4gIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcpIHtcclxuICAgIGhpZGVFZGl0Q29udGFpbmVyKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbXBvcnRJbnB1dEtleUV2ZW50IChldmVudCkge1xyXG4gIGlmIChldmVudC5rZXlDb2RlID09PSAyNykge1xyXG4gICAgaGlkZUltcG9ydENvbnRhaW5lcigpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZG91YmxlQ2xpY2tIYW5kbGVyICgpIHtcclxuICBsZXQgY2FyZElkO1xyXG4gIGxldCBjYXJkO1xyXG5cclxuICBpZiAodGhpcy5pZCA9PT0gJycpIHtcclxuICAgIGNhcmRJZCA9IHBhcnNlSW50KHRoaXMucGFyZW50RWxlbWVudC5pZC5zcGxpdCgnXycpWzFdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY2FyZElkID0gcGFyc2VJbnQodGhpcy5pZC5zcGxpdCgnXycpWzFdKTtcclxuICB9XHJcblxyXG4gIGNhcmQgPSBjYXJkTWFuYWdlci5jYXJkc1tjYXJkSWRdO1xyXG5cclxuICB0aXRsZUlucHV0LnZhbHVlID0gY2FyZC50aXRsZTtcclxuICBlZGl0SW5wdXQudmFsdWUgPSBjYXJkLmRlc2NyaXB0aW9uO1xyXG4gIHRpdGxlSW5wdXQuc3R5bGUudG9wID0gY2FyZC55O1xyXG4gIHRpdGxlSW5wdXQuc3R5bGUubGVmdCA9IGNhcmQueDtcclxuICBlZGl0Q29udGFpbmVyLmNhcmRJZCA9IGNhcmRJZDtcclxuICBlZGl0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGVkaXRJbnB1dC5zdHlsZS50b3AgPSBjYXJkLnkgKyAyMztcclxuICBlZGl0SW5wdXQuc3R5bGUubGVmdCA9IGNhcmQueDtcclxuICB0aXRsZUlucHV0LmZvY3VzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhcmRDbGlja0V2ZW50cyAoZXZlbnQpIHtcclxuICBsZXQgY2FyZElkO1xyXG4gIGxldCBjYXJkO1xyXG5cclxuICBpZiAodGhpcy5pZCA9PT0gJycpIHtcclxuICAgIGNhcmRJZCA9IHBhcnNlSW50KHRoaXMucGFyZW50RWxlbWVudC5pZC5zcGxpdCgnXycpWzFdKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY2FyZElkID0gcGFyc2VJbnQodGhpcy5pZC5zcGxpdCgnXycpWzFdKTtcclxuICB9XHJcblxyXG4gIGNhcmQgPSBjYXJkTWFuYWdlci5jYXJkc1tjYXJkSWRdO1xyXG5cclxuICBpZiAoY2FyZCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcblxyXG4gIGNhcmRNYW5hZ2VyLnNlbGVjdENhcmQoY2FyZC5pZCk7XHJcblxyXG4gIGlmIChldmVudC5jdHJsS2V5KSB7XHJcbiAgfVxyXG4gIGlmIChldmVudC5hbHRLZXkpIHtcclxuICAgIHRoaXMucXVlcnlTZWxlY3RvcignLmNvcHknKS5jbGljaygpO1xyXG4gIH1cclxuICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcclxuXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYXJkTWVudUV2ZW50cyAoKSB7XHJcbiAgbGV0IG9wdGlvbiA9ICQodGhpcykuaHRtbCgpO1xyXG4gIGxldCBzZWxlY3Rpb247XHJcbiAgbGV0IGNhcmRJZCA9IGdldFBhcmVudENhcmRJZCh0aGlzKTtcclxuXHJcbiAgc3dpdGNoIChvcHRpb24pIHtcclxuICAgIGNhc2UgJysnOlxyXG4gICAgICBjaGFuZ2VEZXB0aC5hcHBseSh0aGlzLCBbY2FyZElkLCAxXSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnLSc6XHJcbiAgICAgIGNoYW5nZURlcHRoLmFwcGx5KHRoaXMsIFtjYXJkSWQsIC0xXSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnQyc6XHJcbiAgICAgIHNlbGVjdGlvbiA9IHNlbGVjdFRleHQodGhpcy5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2NhcmRUZXh0JylbMF0pO1xyXG4gICAgICBjb3B5U2VsZWN0aW9uVGV4dCgpO1xyXG4gICAgICBzZWxlY3Rpb24uZW1wdHkoKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd4JzpcclxuICAgICAgY2FyZE1hbmFnZXIuZGVsZXRlQ2FyZChjYXJkTWFuYWdlci5jYXJkc1tjYXJkSWRdKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdWJzpcclxuICAgIGNhc2UgJ08nOlxyXG4gICAgICBjYXJkTWFuYWdlci5jYXJkc1tjYXJkSWRdLnRvZ2dsZUFyY2hpdmVkKCk7XHJcbiAgfVxyXG4gIGNhcmRNYW5hZ2VyLnNhdmVDYXJkcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBleHBvcnRDYXJkcyAoKSB7XHJcbiAgZXhwb3J0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGV4cG9ydENvbnRlbnQuaW5uZXJIVE1MID0gY2FyZE1hbmFnZXIuZXhwb3J0Q2FyZHMoKTtcclxuICBzZWxlY3Rpb24gPSBzZWxlY3RUZXh0KGV4cG9ydENvbnRlbnQpO1xyXG4gIGNvcHlTZWxlY3Rpb25UZXh0KCk7XHJcbiAgc2VsZWN0aW9uLmVtcHR5KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRJbXBvcnRDYXJkc0NvZGUgKCkge1xyXG4gIGxldCBkYXRhID0gaW1wb3J0SW5wdXQudmFsdWU7XHJcbiAgY2FyZE1hbmFnZXIuaW1wb3J0Q2FyZHMoZGF0YSk7XHJcbiAgaW1wb3J0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dJbXBvcnRlciAoKSB7XHJcbiAgaW1wb3J0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGltcG9ydElucHV0LmZvY3VzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQgKCkge1xyXG4gIGNvbnN0IGNhcmQgPSBjYXJkTWFuYWdlci5hZGRDYXJkKE9iamVjdC5jcmVhdGUoQ2FyZCwge30pLmluaXQoJycpKTtcclxuICBjYXJkLnJlbmRlcigpO1xyXG4gIGNhcmRNYW5hZ2VyLnNlbGVjdENhcmQoY2FyZC5pZCk7XHJcblxyXG4gIC8vIGFuZCBub3cgd2UgYXV0b2VkaXQgOkRcclxuICBkb3VibGVDbGlja0hhbmRsZXIuYXBwbHkoY2FyZC5ub2RlKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgaW5pdDogaW5pdFxyXG59O1xyXG4iLCJcclxudmFyIHN1YnMgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIHB1YiAobmFtZSwgcGFyYW1zKSB7XHJcbiAgc3Vic1tuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtKSB7XHJcbiAgICBlbGVtLmNhbGxiYWNrLmFwcGx5KGVsZW0uY29udGV4dCwgcGFyYW1zKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3ViIChuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xyXG4gIGlmIChzdWJzW25hbWVdID09PSB1bmRlZmluZWQpIHtcclxuICAgIHN1YnNbbmFtZV0gPSBbXTtcclxuICB9XHJcblxyXG4gIHN1YnNbbmFtZV0ucHVzaCh7XHJcbiAgICBjYWxsYmFjazogY2FsbGJhY2ssXHJcbiAgICBjb250ZXh0OiBjb250ZXh0XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIHB1YjogcHViLFxyXG4gIHN1Yjogc3ViXHJcbn07XHJcbiIsIndpbmRvdy5DT05GSUcgPSByZXF1aXJlKCcuL2NvbmZpZy5qcycpO1xyXG5cclxubGV0IGtleUhhbmRsZXIgPSByZXF1aXJlKCcuL2xpYi9rZXlIYW5kbGVyJyk7XHJcbmxldCBjYXJkTWFuYWdlciA9IHJlcXVpcmUoJy4vbW9kZWxzL0NhcmRNYW5hZ2VyJykuZ2V0SW5zdGFuY2UoKTtcclxubGV0IHB1YnN1YiA9IHJlcXVpcmUoJy4vbGliL3B1YnN1YicpO1xyXG5cclxud2luZG93LmNtID0ge1xyXG4gIGNhcmRNYW5hZ2VyOiBjYXJkTWFuYWdlclxyXG59O1xyXG5cclxuT2JqZWN0LmFzc2lnbih3aW5kb3csIHJlcXVpcmUoJy4vcHJvdG90eXBlcycpKTtcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgJ3N0cmljdCBtb2RlJztcclxuXHJcbiAga2V5SGFuZGxlci5pbml0KHtcclxuICAgIGNhcmRNYW5hZ2VyOiBjYXJkTWFuYWdlclxyXG4gIH0pO1xyXG4gICAgXHJcbiAgY2FyZE1hbmFnZXIubG9hZENhcmRzKCk7XHJcbiAgY2FyZE1hbmFnZXIucmVuZGVyQWxsQ2FyZHMoKTtcclxufSk7XHJcbiIsImxldCBwdWJzdWIgPSByZXF1aXJlKCcuLi9saWIvcHVic3ViJyk7XHJcbmxldCByYW5kb21NQyA9IHJlcXVpcmUoJ3JhbmRvbS1tYXRlcmlhbC1jb2xvcicpO1xyXG5cclxubGV0IENhcmQgPSB7XHJcbiAgaW5pdDogZnVuY3Rpb24gKHRpdGxlLCBkZXNjcmlwdGlvbiwgcHJpc3RpbmUpIHtcclxuICAgIHRoaXMuaWQgPSAtMTtcclxuICAgIHRoaXMudGl0bGUgPSB0aXRsZTtcclxuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgIHRoaXMuZGVwdGggPSA1O1xyXG4gICAgdGhpcy54ID0gMTAwO1xyXG4gICAgdGhpcy55ID0gMTAwO1xyXG4gICAgdGhpcy5jb2xvciA9IHRoaXMuZ2V0QmFja2dyb3VuZENvbG9yKCk7XHJcbiAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmlzQXJjaGl2ZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuaXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLmNyZWF0ZWRBdCA9ICtuZXcgRGF0ZSgpO1xyXG4gICAgdGhpcy5hcmNoaXZlZEF0ID0gbnVsbDtcclxuICAgIHRoaXMuaXNQcmlzdGluZSA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICByZW5kZXI6IGZ1bmN0aW9uIChhbHdheXMgPSBmYWxzZSkge1xyXG4gICAgaWYgKHRoaXMuaXNEZWxldGVkID09PSB0cnVlICYmIGFsd2F5cyA9PT0gZmFsc2UpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGxldCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBsZXQgbGluayA9IHRoaXMuZmluZExpbmsoKTtcclxuICAgIGxldCB0aGF0ID0gdGhpcztcclxuXHJcbiAgICBpZiAodGhpcy50aXRsZSkge1xyXG4gICAgICBpZiAobGluaykge1xyXG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IGA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHtsaW5rfVwiPiR7dGhpcy50aXRsZX08L2E+YDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aXRsZS5pbm5lckhUTUwgPSB0aGlzLnRpdGxlO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAobGluaykge1xyXG4gICAgICAgIHRpdGxlLmlubmVySFRNTCA9IGA8YSB0YXJnZXQ9XCJfYmxhbmtcIiBocmVmPVwiJHtsaW5rfVwiPkxpbmshPC9hPmA7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAodGhpcy5kZXNjcmlwdGlvbikge1xyXG4gICAgICB0ZXh0LmlubmVySFRNTCA9IHRoaXMuZGVzY3JpcHRpb24ucmVwbGFjZSgvXFxyP1xcbi9nLCAnPGJyLz4nKTtcclxuICAgIH1cclxuXHJcbiAgICB0aXRsZS5jbGFzc05hbWUgPSAnY2FyZFRpdGxlJztcclxuICAgIHRleHQuY2xhc3NOYW1lID0gJ2NhcmRUZXh0JztcclxuXHJcbiAgICBub2RlLmlkID0gJ3RvZG9fJyArIHRoaXMuaWQ7XHJcbiAgICBub2RlLmNsYXNzTmFtZSA9ICdjYXJkIGNhcmQtMSc7XHJcbiAgICBub2RlLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgIG5vZGUuc3R5bGUubGVmdCA9IHRoaXMueDtcclxuICAgIG5vZGUuc3R5bGUudG9wID0gdGhpcy55O1xyXG4gICAgbm9kZS5zdHlsZS5jdXJzb3IgPSAnLXdlYmtpdC1ncmFiJztcclxuICAgIG5vZGUuc3R5bGUuekluZGV4ID0gdGhpcy5kZXB0aDtcclxuICAgIG5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvcjtcclxuXHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbkNvbnRhaW5lcicpLmFwcGVuZENoaWxkKG5vZGUpO1xyXG5cclxuICAgIG5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KCd4JywgJ2NvbnRyb2wgcmVtb3ZlJykpO1xyXG4gICAgLy8gbm9kZS5hcHBlbmRDaGlsZChjcmVhdGVEaXYoJysnLCAnY29udHJvbCB1cCcpKTtcclxuICAgIC8vIG5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KCctJywgJ2NvbnRyb2wgZG93bicpKTtcclxuICAgIG5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KCdDJywgJ2NvbnRyb2wgY29weScpKTtcclxuICAgIG5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KCdkZXB0aDogJyArIHRoaXMuZGVwdGgsICdkZXB0aCcpKTtcclxuICAgIC8vIG5vZGUuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KHRoaXMuaXNBcmNoaXZlZCA/ICdWJyA6ICdPJywgJ2lzQXJjaGl2ZWQnKSk7XHJcbiAgICBub2RlLmFwcGVuZENoaWxkKGNyZWF0ZURpdignaWQ6ICcgKyB0aGlzLmlkLCAnaWQnKSk7XHJcblxyXG4gICAgbm9kZS5hcHBlbmRDaGlsZCh0aXRsZSk7XHJcbiAgICBub2RlLmFwcGVuZENoaWxkKHRleHQpO1xyXG5cclxuICAgICQoJyN0b2RvXycgKyB0aGlzLmlkKS5kcmFnZ2FibGUoe1xyXG4gICAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IGNhcmQgPSAkKCcjdG9kb18nICsgdGhhdC5pZCk7XHJcblxyXG4gICAgICAgIGlmICh0aGF0LmlzUHJpc3RpbmUgPT09IHRydWUpIHtcclxuICAgICAgICAgIHRoYXQuaXNQcmlzdGluZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgIHB1YnN1Yi5wdWIod2luZG93LkNPTkZJRy5MRVNTX1BSSVNUSU5FKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoYXQueCA9ICtjYXJkLmNzcygnbGVmdCcpLnJlcGxhY2UoJ3B4JywgJycpO1xyXG4gICAgICAgIHRoYXQueSA9ICtjYXJkLmNzcygndG9wJykucmVwbGFjZSgncHgnLCAnJyk7XHJcblxyXG4gICAgICAgIHB1YnN1Yi5wdWIod2luZG93LkNPTkZJRy5TRUxFQ1RfQ0FSRCwgW3RoYXQuaWRdKTtcclxuICAgICAgICBwdWJzdWIucHViKHdpbmRvdy5DT05GSUcuU0FWRV9DQVJEUyk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMubm9kZSA9IG5vZGU7XHJcblxyXG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQgPT09IHRydWUpIHtcclxuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLmlzQXJjaGl2ZWQpIHtcclxuICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIGdldEJhY2tncm91bmRDb2xvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHJhbmRvbU1DLmdldENvbG9yKHsgc2hhZGVzOiBbJzIwMCcsICczMDAnXSB9KTtcclxuICB9LFxyXG4gIGRlcmVuZGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b2RvXycgKyB0aGlzLmlkKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYWluQ29udGFpbmVyJykucmVtb3ZlQ2hpbGQobm9kZSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICB0b2dnbGVBcmNoaXZlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMuaXNBcmNoaXZlZCA9PT0gZmFsc2UgfHwgdGhpcy5pc0FyY2hpdmVkID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5ub2RlLmNsYXNzTGlzdC5yZW1vdmUoJ25vdENvbXBsZXRlZCcpO1xyXG4gICAgICB2b2lkIHRoaXMubm9kZS5vZmZzZXRXaWR0aDtcclxuICAgICAgdGhpcy5ub2RlLmNsYXNzTGlzdC5hZGQoJ2NvbXBsZXRlZCcpO1xyXG4gICAgICB0aGlzLmFyY2hpdmVkQXQgPSArbmV3IERhdGUoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdjb21wbGV0ZWQnKTtcclxuICAgICAgdm9pZCB0aGlzLm5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QuYWRkKCdub3RDb21wbGV0ZWQnKTtcclxuICAgICAgdGhpcy5hcmNoaXZlZEF0ID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmlzQXJjaGl2ZWQgPSAhdGhpcy5pc0FyY2hpdmVkO1xyXG5cclxuICAgIHB1YnN1Yi5wdWIod2luZG93LkNPTkZJRy5TQVZFX0NBUkRTKTtcclxuICB9LFxyXG4gIGRlbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5pc0RlbGV0ZWQgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuZGVyZW5kZXIoKTtcclxuICB9LFxyXG4gIHVuZGVsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmlzRGVsZXRlZCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMucmVuZGVyKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBmaW5kTGluazogZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc3QgcmVnZXggPSAvKGh0dHBzPzpcXC9cXC9bXlxcc10rfHd3dy5bXlxcc10rKS87XHJcbiAgICBsZXQgbGluayA9IHJlZ2V4LmV4ZWModGhpcy50aXRsZSk7XHJcblxyXG4gICAgaWYgKGxpbmsgPT0gbnVsbCkge1xyXG4gICAgICBsaW5rID0gcmVnZXguZXhlYyh0aGlzLmRlc2NyaXB0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobGluaykge1xyXG4gICAgICByZXR1cm4gbGlua1swXTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IENhcmQ7XHJcbiIsImNvbnN0IENhcmQgPSByZXF1aXJlKCcuL0NhcmQnKTtcclxuY29uc3QgcHVic3ViID0gcmVxdWlyZSgnLi4vbGliL3B1YnN1YicpO1xyXG5jb25zdCBDT05GSUcgPSByZXF1aXJlKCcuLi9jb25maWcnKTtcclxuXHJcbmxldCBDYXJkTWFuYWdlciA9IHtcclxuICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmNhcmRzID0gW107XHJcbiAgICB0aGlzLnNlbGVjdGVkQ2FyZCA9IHsgaWQ6IC0xIH07XHJcbiAgICB0aGlzLmRlbGV0ZWRDYXJkcyA9IFtdO1xyXG4gICAgdGhpcy5wcmlzdGluZSA9IDA7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBhZGRDYXJkOiBmdW5jdGlvbiAoY2FyZCkge1xyXG4gICAgdGhpcy5jYXJkcy5wdXNoKGNhcmQpO1xyXG4gICAgY2FyZC5pZCA9IHRoaXMuY2FyZHMubGVuZ3RoIC0gMTtcclxuXHJcbiAgICBjYXJkLnggPSBjYXJkLnggKyB0aGlzLnByaXN0aW5lICogMTA7XHJcbiAgICBjYXJkLnkgPSBjYXJkLnkgKyB0aGlzLnByaXN0aW5lICogMTA7XHJcblxyXG4gICAgdGhpcy5wcmlzdGluZSsrO1xyXG5cclxuICAgIHJldHVybiBjYXJkO1xyXG4gIH0sXHJcbiAgcmVtb3ZlQ2FyZDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICB0aGlzLmNhcmRzW2lkXS5kZXJlbmRlcigpO1xyXG4gICAgdGhpcy5jYXJkc1tpZF0gPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICByZWRyYXdDYXJkOiBmdW5jdGlvbiAoY2FyZElkLCB4LCB5KSB7XHJcbiAgICBsZXQgY2FyZCA9IHRoaXMuY2FyZHNbY2FyZElkXTtcclxuICAgIGNhcmQueCA9IHg7XHJcbiAgICBjYXJkLnkgPSB5O1xyXG5cclxuICAgIGNhcmQuZGVyZW5kZXIoKTtcclxuICAgIGNhcmQucmVuZGVyKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBzYXZlQ2FyZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0eXBlb2YgKFN0b3JhZ2UpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcmRzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJkcykpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coJ3lvdSBkb25cXCd0IGhhdmUgbG9jYWwgc3RvcmFnZSA6KCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkQ2FyZCgpO1xyXG4gICAgdGhpcy5wZXJzaXN0RGVsZXRlZENhcmRzKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBsb2FkQ2FyZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuY2FyZHMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY2FyZHMnKSk7XHJcblxyXG4gICAgaWYgKHRoaXMuY2FyZHMgPT09IG51bGwpIHtcclxuICAgICAgdGhpcy5jYXJkcyA9IEpTT04ucGFyc2Uod2luZG93LmF0b2IoQ09ORklHLkRFRkFVTFRfQ09OVEVOVCkpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuY2xlYXJBcnJheSgpO1xyXG5cclxuICAgIHRoaXMubG9hZFNlbGVjdGVkQ2FyZCgpO1xyXG4gICAgdGhpcy5sb2FkRGVsZXRlZENhcmRzKCk7XHJcblxyXG4gICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBjbGVhckFycmF5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgaTtcclxuXHJcbiAgICB0aGlzLmNhcmRzID0gdGhpcy5jYXJkcy5maWx0ZXIoZnVuY3Rpb24gKGVsZW0pIHtcclxuICAgICAgcmV0dXJuIGVsZW0gIT09IHVuZGVmaW5lZCAmJiBlbGVtICE9PSBudWxsO1xyXG4gICAgfSk7XHJcbiAgICBmb3IgKGkgaW4gdGhpcy5jYXJkcykge1xyXG4gICAgICBpZiAodGhpcy5jYXJkcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xyXG4gICAgICAgIHRoaXMuY2FyZHNbK2ldLmlkID0gK2k7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9LFxyXG4gIHJlUmVuZGVyQWxsQ2FyZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuY2FyZHMuZm9yRWFjaCgoY2FyZCkgPT4ge1xyXG4gICAgICBjYXJkLmRlcmVuZGVyKCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMucmVuZGVyQWxsQ2FyZHMoKTtcclxuICB9LFxyXG4gIHJlbmRlckFsbENhcmRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgY2FyZC5zZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDYXJkICYmICh0aGlzLnNlbGVjdGVkQ2FyZC5pZCA9PT0gY2FyZC5pZCk7XHJcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihjYXJkLCBDYXJkKTtcclxuICAgICAgY2FyZC5yZW5kZXIoKTtcclxuICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXM7XHJcbiAgfSxcclxuICBnZXRJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKENhcmRNYW5hZ2VyLmluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgQ2FyZE1hbmFnZXIuaW5zdGFuY2UgPSBPYmplY3QuY3JlYXRlKENhcmRNYW5hZ2VyLCB7fSk7XHJcbiAgICAgIENhcmRNYW5hZ2VyLmluc3RhbmNlLmluaXQoKTtcclxuICAgICAgcHVic3ViLnN1Yih3aW5kb3cuQ09ORklHLlNBVkVfQ0FSRFMsIENhcmRNYW5hZ2VyLmluc3RhbmNlLnNhdmVDYXJkcywgQ2FyZE1hbmFnZXIuaW5zdGFuY2UpO1xyXG4gICAgICBwdWJzdWIuc3ViKHdpbmRvdy5DT05GSUcuU0VMRUNUX0NBUkQsIENhcmRNYW5hZ2VyLmluc3RhbmNlLnNlbGVjdENhcmQsIENhcmRNYW5hZ2VyLmluc3RhbmNlKTtcclxuICAgICAgcHVic3ViLnN1Yih3aW5kb3cuQ09ORklHLlJFUkVOREVSLCBDYXJkTWFuYWdlci5pbnN0YW5jZS5yZVJlbmRlckFsbENhcmRzLCBDYXJkTWFuYWdlci5pbnN0YW5jZSk7XHJcbiAgICAgIHB1YnN1Yi5zdWIod2luZG93LkNPTkZJRy5MRVNTX1BSSVNUSU5FLCBDYXJkTWFuYWdlci5pbnN0YW5jZS5sZXNzUHJpc3RpbmUsIENhcmRNYW5hZ2VyLmluc3RhbmNlKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gQ2FyZE1hbmFnZXIuaW5zdGFuY2U7XHJcbiAgfSxcclxuICBsZXNzUHJpc3RpbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucHJpc3RpbmUtLTtcclxuICB9LFxyXG4gIGV4cG9ydENhcmRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gd2luZG93LmJ0b2EoSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJkcykpO1xyXG4gIH0sXHJcbiAgaW1wb3J0Q2FyZHM6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NhcmRzJywgd2luZG93LmF0b2IoZGF0YSkpO1xyXG4gICAgdGhpcy5sb2FkQ2FyZHMoKTtcclxuICAgIHRoaXMucmVuZGVyQWxsQ2FyZHMoKTtcclxuICB9LFxyXG4gIHNlbGVjdENhcmQ6IGZ1bmN0aW9uIChjYXJkSWQpIHtcclxuICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc2VsZWN0ZWRDYXJkLm5vZGUuY2xhc3NMaXN0ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZENhcmQubm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5zZWxlY3RlZENhcmQgPSB0aGlzLmNhcmRzW2NhcmRJZF07XHJcblxyXG4gICAgdGhpcy5zZWxlY3RlZENhcmQubm9kZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xyXG5cclxuICAgIHRoaXMucGVyc2lzdFNlbGVjdGVkQ2FyZCgpO1xyXG4gICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7XHJcbiAgfSxcclxuICBuZXh0Q2FyZDogZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IGl0ID0gK3RoaXMuc2VsZWN0ZWRDYXJkLmlkICsgMTtcclxuXHJcbiAgICB3aGlsZSAoaXQgIT09ICt0aGlzLnNlbGVjdGVkQ2FyZC5pZCkge1xyXG4gICAgICBpZiAodGhpcy5jYXJkc1tpdF0gIT09IHVuZGVmaW5lZCAmJiB0aGlzLmNhcmRzW2l0XS5pc0RlbGV0ZWQgIT09IHRydWUpIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoKytpdCA+PSB0aGlzLmNhcmRzLmxlbmd0aCkge1xyXG4gICAgICAgIGl0ID0gMDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2VsZWN0Q2FyZChpdCk7XHJcbiAgfSxcclxuICBwcmV2aW91c0NhcmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBpdCA9ICt0aGlzLnNlbGVjdGVkQ2FyZC5pZCAtIDE7XHJcblxyXG4gICAgd2hpbGUgKGl0ICE9PSArdGhpcy5zZWxlY3RlZENhcmQuaWQpIHtcclxuICAgICAgaWYgKHRoaXMuY2FyZHNbaXRdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBpZiAoLS1pdCA8PSAwKSB7XHJcbiAgICAgICAgaXQgPSB0aGlzLmNhcmRzLmxlbmd0aDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuc2VsZWN0Q2FyZChpdCk7XHJcbiAgfSxcclxuICBwZXJzaXN0U2VsZWN0ZWRDYXJkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5zZWxlY3RlZENhcmQgJiYgdGhpcy5zZWxlY3RlZENhcmQuaWQgPiAtMSkge1xyXG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGVjdGVkQ2FyZCcsIHRoaXMuc2VsZWN0ZWRDYXJkLmlkKTtcclxuICAgIH1cclxuICB9LFxyXG4gIGxvYWRTZWxlY3RlZENhcmQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBzZWxlY3RlZENhcmRJZCA9ICt3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NlbGVjdGVkQ2FyZCcpO1xyXG5cclxuICAgIGlmIChzZWxlY3RlZENhcmRJZCAhPT0gdW5kZWZpbmVkICYmIHNlbGVjdGVkQ2FyZElkID4gLTEpIHtcclxuICAgICAgdGhpcy5zZWxlY3RlZENhcmQgPSB0aGlzLmNhcmRzW3NlbGVjdGVkQ2FyZElkXTtcclxuICAgIH1cclxuICB9LFxyXG4gIHBlcnNpc3REZWxldGVkQ2FyZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZGVsZXRlZENhcmRzJywgSlNPTi5zdHJpbmdpZnkodGhpcy5kZWxldGVkQ2FyZHMpKTtcclxuICB9LFxyXG4gIGxvYWREZWxldGVkQ2FyZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZGVsZXRlZENhcmRzID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RlbGV0ZWRDYXJkcycpKSB8fCBbXTtcclxuICB9LFxyXG4gIGRlbGV0ZUNhcmQ6IGZ1bmN0aW9uIChjYXJkKSB7XHJcbiAgICB0aGlzLmRlbGV0ZWRDYXJkcy5wdXNoKGNhcmQuaWQpO1xyXG5cclxuICAgIGNhcmQuZGVsZXRlKCk7XHJcbiAgfSxcclxuICB1bmRlbGV0ZUxhc3RDYXJkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy5kZWxldGVkQ2FyZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLnNlbGVjdENhcmQodGhpcy5jYXJkc1t0aGlzLmRlbGV0ZWRDYXJkcy5zcGxpY2UodGhpcy5kZWxldGVkQ2FyZHMubGVuZ3RoIC0gMSldLnVuZGVsZXRlKCkuaWQpO1xyXG5cclxuICAgIHRoaXMuc2F2ZUNhcmRzKCk7XHJcbiAgfVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBDYXJkTWFuYWdlcjtcclxuIiwibGV0IGNhcmRNYW5hZ2VyID0gcmVxdWlyZSgnLi9tb2RlbHMvQ2FyZE1hbmFnZXInKS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlRGl2ICh0ZXh0LCBjbGFzc05hbWUpIHtcclxuICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgZGl2LmlubmVySFRNTCA9IHRleHQ7XHJcbiAgZGl2LnN0eWxlLmZsb2F0ID0gJ3JpZ2h0JztcclxuICBkaXYuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xyXG4gIGRpdi5zdHlsZS53aWR0aCA9ICdhdXRvJztcclxuICBkaXYuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgZGl2LnN0eWxlLm1hcmdpbiA9ICcwIDNweCc7XHJcblxyXG4gIGlmIChjbGFzc05hbWUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgZGl2LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBkaXY7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvcHlTZWxlY3Rpb25UZXh0ICgpIHtcclxuICBsZXQgY29weXN1Y2Nlc3M7IC8vIGxldCB0byBjaGVjayB3aGV0aGVyIGV4ZWNDb21tYW5kIHN1Y2Nlc3NmdWxseSBleGVjdXRlZFxyXG4gIHRyeSB7XHJcbiAgICBjb3B5c3VjY2VzcyA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7IC8vIHJ1biBjb21tYW5kIHRvIGNvcHkgc2VsZWN0ZWQgdGV4dCB0byBjbGlwYm9hcmRcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb3B5c3VjY2VzcyA9IGZhbHNlO1xyXG4gIH1cclxuICByZXR1cm4gY29weXN1Y2Nlc3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdFRleHQgKGVsZW1lbnQpIHtcclxuICBsZXQgZG9jID0gZG9jdW1lbnQ7XHJcbiAgbGV0IHRleHQgPSBlbGVtZW50O1xyXG4gIGxldCByYW5nZSwgc2VsZWN0aW9uXHJcbiAgICA7XHJcbiAgaWYgKGRvYy5ib2R5LmNyZWF0ZVRleHRSYW5nZSkge1xyXG4gICAgcmFuZ2UgPSBkb2N1bWVudC5ib2R5LmNyZWF0ZVRleHRSYW5nZSgpO1xyXG4gICAgcmFuZ2UubW92ZVRvRWxlbWVudFRleHQodGV4dCk7XHJcbiAgICByYW5nZS5zZWxlY3QoKTtcclxuICB9IGVsc2UgaWYgKHdpbmRvdy5nZXRTZWxlY3Rpb24pIHtcclxuICAgIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24oKTtcclxuICAgIHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcclxuICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0ZXh0KTtcclxuICAgIHNlbGVjdGlvbi5yZW1vdmVBbGxSYW5nZXMoKTtcclxuICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XHJcbiAgICByZXR1cm4gc2VsZWN0aW9uO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UGFyZW50Q2FyZElkIChjb250ZXh0KSB7XHJcbiAgaWYgKGNvbnRleHQucGFyZW50RWxlbWVudCA9PT0gbnVsbCkgcmV0dXJuO1xyXG4gIHJldHVybiBwYXJzZUludChjb250ZXh0LnBhcmVudEVsZW1lbnQuaWQuc3BsaXQoJ18nKVsxXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNvbWV0aGluZ0J5Y2xhc3NOYW1lIChjb250ZXh0LCBjbGFzc25hbWUpIHtcclxuICBsZXQgcmVzID0gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNsYXNzbmFtZSk7XHJcblxyXG4gIGlmIChyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICByZXMgPSBjb250ZXh0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc25hbWUpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZnVuY3Rpb24gY2hhbmdlRGVwdGggKGNhcmRJZCwgaW5jcmVtZW50KSB7XHJcbiAgbGV0IGRlcHRoID0gY2FyZE1hbmFnZXIuY2FyZHNbY2FyZElkXS5kZXB0aCArIGluY3JlbWVudDtcclxuXHJcbiAgdGhpcy5zdHlsZS56SW5kZXggPSBkZXB0aDtcclxuICBjYXJkTWFuYWdlci5jYXJkc1tjYXJkSWRdLmRlcHRoID0gZGVwdGg7XHJcblxyXG4gIGxldCBlbGVtID0gZ2V0U29tZXRoaW5nQnljbGFzc05hbWUodGhpcywgJ2RlcHRoJyk7XHJcbiAgZWxlbVswXS5pbm5lckhUTUwgPSBkZXB0aDtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RGVwdGggKGNhcmRJZCwgZGVwdGgpIHtcclxuICB0aGlzLnN0eWxlLnpJbmRleCA9IGRlcHRoO1xyXG4gIGNhcmRNYW5hZ2VyLmNhcmRzW2NhcmRJZF0uZGVwdGggPSBkZXB0aDtcclxuXHJcbiAgbGV0IGVsZW0gPSBnZXRTb21ldGhpbmdCeWNsYXNzTmFtZSh0aGlzLCAnZGVwdGgnKTtcclxuICBlbGVtWzBdLmlubmVySFRNTCA9IGRlcHRoO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkSFRNTEJ5SWQgKG1haW5Db250YWluZXIsIGlkKSB7XHJcbiAgcmV0dXJuIG1haW5Db250YWluZXIuZ2V0RWxlbWVudEJ5SWQoJ3RvZG9fJyArIGlkKTtcclxufVxyXG5cclxuLy8gUFJPVE9UWVBFU1xyXG5cclxuLypcclxuICogUmV0dXJucyB0aGUgc2l6ZSBvZiBhbiBhcnJheVxyXG4gKi9cclxuQXJyYXkucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uIChhKSB7XHJcbiAgICByZXR1cm4gYSAhPT0gdW5kZWZpbmVkO1xyXG4gIH0pLmxlbmd0aDtcclxufTtcclxuXHJcbi8qXHJcbiAqIFJldHVybnMgdGhlIHNpemUgb2YgYW4gb2JqZWN0XHJcbiAqL1xyXG5PYmplY3Quc2l6ZSA9IGZ1bmN0aW9uIChvYmopIHtcclxuICBsZXQgc2l6ZSA9IDA7XHJcbiAgbGV0IGtleSA9ICcnO1xyXG5cclxuICBmb3IgKGtleSBpbiBvYmopIHtcclxuICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkgc2l6ZSsrO1xyXG4gIH1cclxuICByZXR1cm4gc2l6ZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGNyZWF0ZURpdjogY3JlYXRlRGl2LFxyXG4gIGNvcHlTZWxlY3Rpb25UZXh0OiBjb3B5U2VsZWN0aW9uVGV4dCxcclxuICBzZWxlY3RUZXh0OiBzZWxlY3RUZXh0LFxyXG4gIGdldFBhcmVudENhcmRJZDogZ2V0UGFyZW50Q2FyZElkLFxyXG4gIGNoYW5nZURlcHRoOiBjaGFuZ2VEZXB0aCxcclxuICBzZXREZXB0aDogc2V0RGVwdGgsXHJcbiAgZ2V0Q2FyZEhUTUxCeUlkOiBnZXRDYXJkSFRNTEJ5SWRcclxufTtcclxuIl19"}